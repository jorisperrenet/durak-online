(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const si=!1;var Dr=Array.isArray,co=Array.prototype.indexOf,$r=Array.from,uo=Object.defineProperty,Fn=Object.getOwnPropertyDescriptor,wa=Object.getOwnPropertyDescriptors,fo=Object.prototype,vo=Array.prototype,hi=Object.getPrototypeOf,na=Object.isExtensible;function _o(e){return e()}function oi(e){for(var n=0;n<e.length;n++)e[n]()}function ka(){var e,n,r=new Promise((i,a)=>{e=i,n=a});return{promise:r,resolve:e,reject:n}}function po(e,n){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const i of e)if(r.push(i),r.length===n)break;return r}const Ze=2,Pr=4,fr=8,Sa=1<<24,Zt=16,en=32,zn=64,mi=128,Et=512,Xe=1024,ft=2048,Lt=4096,yt=8192,Vt=16384,gi=32768,Ln=65536,ra=1<<17,za=1<<18,Bn=1<<19,Ta=1<<20,Kt=1<<25,wn=32768,li=1<<21,bi=1<<22,ln=1<<23,cn=Symbol("$state"),ho=Symbol("legacy props"),mo=Symbol(""),In=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Aa(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function go(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function bo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function yo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function wo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ko(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function So(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function To(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ao(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Eo=1,Po=2,Ea=4,Ro=8,Co=16,Oo=2,Mo=4,No=8,Io=1,Do=2,Qe=Symbol(),$o="http://www.w3.org/1999/xhtml";function Fo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Lo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Pa(e){return e===this.v}function Ho(e,n){return e!=e?n==n:e!==n||e!==null&&typeof e=="object"||typeof e=="function"}function Ra(e){return!Ho(e,this.v)}let qn=!1,jo=!1;function Uo(){qn=!0}let Oe=null;function Hn(e){Oe=e}function xi(e,n=!1,r){Oe={p:Oe,i:!1,c:null,e:null,s:e,x:null,l:qn&&!n?{s:null,u:null,$:[]}:null}}function yi(e){var n=Oe,r=n.e;if(r!==null){n.e=null;for(var i of r)Wa(i)}return n.i=!0,Oe=n.p,{}}function dr(){return!qn||Oe!==null&&Oe.l===null}let gn=[];function Ca(){var e=gn;gn=[],oi(e)}function vr(e){if(gn.length===0&&!nr){var n=gn;queueMicrotask(()=>{n===gn&&Ca()})}gn.push(e)}function Bo(){for(;gn.length>0;)Ca()}function Oa(e){var n=me;if(n===null)return ne.f|=ln,e;if((n.f&gi)===0){if((n.f&mi)===0)throw e;n.b.error(e)}else jn(e,n)}function jn(e,n){for(;n!==null;){if((n.f&mi)!==0)try{n.b.error(e);return}catch(r){e=r}n=n.parent}throw e}const qo=-7169;function Be(e,n){e.f=e.f&qo|n}function wi(e){(e.f&Et)!==0||e.deps===null?Be(e,Xe):Be(e,Lt)}function Ma(e){if(e!==null)for(const n of e)(n.f&Ze)===0||(n.f&wn)===0||(n.f^=wn,Ma(n.deps))}function Na(e,n,r){(e.f&ft)!==0?n.add(e):(e.f&Lt)!==0&&r.add(e),Ma(e.deps),Be(e,Xe)}const Sr=new Set;let ve=null,tr=null,Ot=null,Tt=[],Fr=null,ci=!1,nr=!1;class $t{committed=!1;current=new Map;previous=new Map;#t=new Set;#s=new Set;#e=0;#i=0;#a=null;#r=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#i>0}process(n){Tt=[],tr=null,this.apply();var r=[],i=[];for(const a of n)this.#o(a,r,i);this.is_fork||this.#c(),this.is_deferred()?(this.#l(i),this.#l(r)):(tr=this,ve=null,ia(i),ia(r),tr=null,this.#a?.resolve()),Ot=null}#o(n,r,i){n.f^=Xe;for(var a=n.first,o=null;a!==null;){var c=a.f,v=(c&(en|zn))!==0,_=v&&(c&Xe)!==0,x=_||(c&yt)!==0||this.skipped_effects.has(a);if(!x&&a.fn!==null){v?a.f^=Xe:o!==null&&(c&(Pr|fr|Sa))!==0?o.b.defer_effect(a):(c&Pr)!==0?r.push(a):Gn(a)&&((c&Zt)!==0&&this.#r.add(a),Un(a));var w=a.first;if(w!==null){a=w;continue}}var P=a.parent;for(a=a.next;a===null&&P!==null;)P===o&&(o=null),a=P.next,P=P.parent}}#l(n){for(var r=0;r<n.length;r+=1)Na(n[r],this.#r,this.#n)}capture(n,r){r!==Qe&&!this.previous.has(n)&&this.previous.set(n,r),(n.f&ln)===0&&(this.current.set(n,n.v),Ot?.set(n,n.v))}activate(){ve=this,this.apply()}deactivate(){ve===this&&(ve=null,Ot=null)}flush(){if(this.activate(),Tt.length>0){if(Ia(),ve!==null&&ve!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#s)n(this);this.#s.clear()}#c(){if(this.#i===0){for(const n of this.#t)n();this.#t.clear()}this.#e===0&&this.#u()}#u(){if(Sr.size>1){this.previous.clear();var n=Ot,r=!0;for(const a of Sr){if(a===this){r=!1;continue}const o=[];for(const[v,_]of this.current){if(a.current.has(v))if(r&&_!==a.current.get(v))a.current.set(v,_);else continue;o.push(v)}if(o.length===0)continue;const c=[...a.current.keys()].filter(v=>!this.current.has(v));if(c.length>0){var i=Tt;Tt=[];const v=new Set,_=new Map;for(const x of o)Da(x,c,v,_);if(Tt.length>0){ve=a,a.apply();for(const x of Tt)a.#o(x,[],[]);a.deactivate()}Tt=i}}ve=null,Ot=n}this.committed=!0,Sr.delete(this)}increment(n){this.#e+=1,n&&(this.#i+=1)}decrement(n){this.#e-=1,n&&(this.#i-=1),this.revive()}revive(){for(const n of this.#r)this.#n.delete(n),Be(n,ft),Xt(n);for(const n of this.#n)Be(n,Lt),Xt(n);this.flush()}oncommit(n){this.#t.add(n)}ondiscard(n){this.#s.add(n)}settled(){return(this.#a??=ka()).promise}static ensure(){if(ve===null){const n=ve=new $t;Sr.add(ve),nr||$t.enqueue(()=>{ve===n&&n.flush()})}return ve}static enqueue(n){vr(n)}apply(){}}function Go(e){var n=nr;nr=!0;try{for(var r;;){if(Bo(),Tt.length===0&&(ve?.flush(),Tt.length===0))return Fr=null,r;Ia()}}finally{nr=n}}function Ia(){var e=xn;ci=!0;var n=null;try{var r=0;for(Or(!0);Tt.length>0;){var i=$t.ensure();if(r++>1e3){var a,o;Yo()}i.process(Tt),un.clear()}}finally{ci=!1,Or(e),Fr=null}}function Yo(){try{wo()}catch(e){jn(e,Fr)}}let Wt=null;function ia(e){var n=e.length;if(n!==0){for(var r=0;r<n;){var i=e[r++];if((i.f&(Vt|yt))===0&&Gn(i)&&(Wt=new Set,Un(i),i.deps===null&&i.first===null&&i.nodes===null&&(i.teardown===null&&i.ac===null?Ja(i):i.fn=null),Wt?.size>0)){un.clear();for(const a of Wt){if((a.f&(Vt|yt))!==0)continue;const o=[a];let c=a.parent;for(;c!==null;)Wt.has(c)&&(Wt.delete(c),o.push(c)),c=c.parent;for(let v=o.length-1;v>=0;v--){const _=o[v];(_.f&(Vt|yt))===0&&Un(_)}}Wt.clear()}}Wt=null}}function Da(e,n,r,i){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const a of e.reactions){const o=a.f;(o&Ze)!==0?Da(a,n,r,i):(o&(bi|Zt))!==0&&(o&ft)===0&&$a(a,n,i)&&(Be(a,ft),Xt(a))}}function $a(e,n,r){const i=r.get(e);if(i!==void 0)return i;if(e.deps!==null)for(const a of e.deps){if(n.includes(a))return!0;if((a.f&Ze)!==0&&$a(a,n,r))return r.set(a,!0),!0}return r.set(e,!1),!1}function Xt(e){for(var n=Fr=e;n.parent!==null;){n=n.parent;var r=n.f;if(ci&&n===me&&(r&Zt)!==0&&(r&za)===0)return;if((r&(zn|en))!==0){if((r&Xe)===0)return;n.f^=Xe}}Tt.push(n)}function Wo(e){let n=0,r=kn(0),i;return()=>{zi()&&(t(r),pr(()=>(n===0&&(i=d(()=>e(()=>rr(r)))),n+=1,()=>{vr(()=>{n-=1,n===0&&(i?.(),i=void 0,rr(r))})})))}}var Ko=Ln|Bn|mi;function Vo(e,n,r){new Jo(e,n,r)}class Jo{parent;is_pending=!1;#t;#s=null;#e;#i;#a;#r=null;#n=null;#o=null;#l=null;#c=null;#u=0;#f=0;#v=!1;#_=new Set;#p=new Set;#d=null;#x=Wo(()=>(this.#d=kn(this.#u),()=>{this.#d=null}));constructor(n,r,i){this.#t=n,this.#e=r,this.#i=i,this.parent=me.b,this.is_pending=!!this.#e.pending,this.#a=Ai(()=>{me.b=this;{var a=this.#g();try{this.#r=At(()=>i(a))}catch(o){this.error(o)}this.#f>0?this.#m():this.is_pending=!1}return()=>{this.#c?.remove()}},Ko)}#y(){try{this.#r=At(()=>this.#i(this.#t))}catch(n){this.error(n)}}#w(){const n=this.#e.pending;n&&(this.#n=At(()=>n(this.#t)),$t.enqueue(()=>{var r=this.#g();this.#r=this.#h(()=>($t.ensure(),At(()=>this.#i(r)))),this.#f>0?this.#m():(bn(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#g(){var n=this.#t;return this.is_pending&&(this.#c=Jt(),this.#t.before(this.#c),n=this.#c),n}defer_effect(n){Na(n,this.#_,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#h(n){var r=me,i=ne,a=Oe;Ft(this.#a),_t(this.#a),Hn(this.#a.ctx);try{return n()}catch(o){return Oa(o),null}finally{Ft(r),_t(i),Hn(a)}}#m(){const n=this.#e.pending;this.#r!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Za(this.#r,this.#l)),this.#n===null&&(this.#n=At(()=>n(this.#t)))}#b(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(n);return}if(this.#f+=n,this.#f===0){this.is_pending=!1;for(const r of this.#_)Be(r,ft),Xt(r);for(const r of this.#p)Be(r,Lt),Xt(r);this.#_.clear(),this.#p.clear(),this.#n&&bn(this.#n,()=>{this.#n=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(n){this.#b(n),this.#u+=n,this.#d&&Sn(this.#d,this.#u)}get_effect_pending(){return this.#x(),t(this.#d)}error(n){var r=this.#e.onerror;let i=this.#e.failed;if(this.#v||!r&&!i)throw n;this.#r&&(pt(this.#r),this.#r=null),this.#n&&(pt(this.#n),this.#n=null),this.#o&&(pt(this.#o),this.#o=null);var a=!1,o=!1;const c=()=>{if(a){Lo();return}a=!0,o&&Ao(),$t.ensure(),this.#u=0,this.#o!==null&&bn(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#h(()=>(this.#v=!1,At(()=>this.#i(this.#t)))),this.#f>0?this.#m():this.is_pending=!1};var v=ne;try{_t(null),o=!0,r?.(n,c),o=!1}catch(_){jn(_,this.#a&&this.#a.parent)}finally{_t(v)}i&&vr(()=>{this.#o=this.#h(()=>{$t.ensure(),this.#v=!0;try{return At(()=>{i(this.#t,()=>n,()=>c)})}catch(_){return jn(_,this.#a.parent),null}finally{this.#v=!1}})})}}function Qo(e,n,r,i){const a=dr()?Lr:I;if(r.length===0&&e.length===0){i(n.map(a));return}var o=ve,c=me,v=Xo();function _(){Promise.all(r.map(x=>Zo(x))).then(x=>{v();try{i([...n.map(a),...x])}catch(w){(c.f&Vt)===0&&jn(w,c)}o?.deactivate(),Rr()}).catch(x=>{jn(x,c)})}e.length>0?Promise.all(e).then(()=>{v();try{return _()}finally{o?.deactivate(),Rr()}}):_()}function Xo(){var e=me,n=ne,r=Oe,i=ve;return function(o=!0){Ft(e),_t(n),Hn(r),o&&i?.activate()}}function Rr(){Ft(null),_t(null),Hn(null)}function Lr(e){var n=Ze|ft,r=ne!==null&&(ne.f&Ze)!==0?ne:null;return me!==null&&(me.f|=Bn),{ctx:Oe,deps:null,effects:null,equals:Pa,f:n,fn:e,reactions:null,rv:0,v:Qe,wv:0,parent:r??me,ac:null}}function Zo(e,n,r){let i=me;i===null&&go();var a=i.b,o=void 0,c=kn(Qe),v=!ne,_=new Map;return fl(()=>{var x=ka();o=x.promise;try{Promise.resolve(e()).then(x.resolve,x.reject).then(()=>{w===ve&&w.committed&&w.deactivate(),Rr()})}catch(E){x.reject(E),Rr()}var w=ve;if(v){var P=a.is_rendered();a.update_pending_count(1),w.increment(P),_.get(w)?.reject(In),_.delete(w),_.set(w,x)}const S=(E,re=void 0)=>{if(w.activate(),re)re!==In&&(c.f|=ln,Sn(c,re));else{(c.f&ln)!==0&&(c.f^=ln),Sn(c,E);for(const[we,C]of _){if(_.delete(we),we===w)break;C.reject(In)}}v&&(a.update_pending_count(-1),w.decrement(P))};x.promise.then(S,E=>S(null,E||"unknown"))}),Ti(()=>{for(const x of _.values())x.reject(In)}),new Promise(x=>{function w(P){function S(){P===o?x(c):w(o)}P.then(S,S)}w(o)})}function el(e){const n=Lr(e);return es(n),n}function I(e){const n=Lr(e);return n.equals=Ra,n}function Fa(e){var n=e.effects;if(n!==null){e.effects=null;for(var r=0;r<n.length;r+=1)pt(n[r])}}function tl(e){for(var n=e.parent;n!==null;){if((n.f&Ze)===0)return(n.f&Vt)===0?n:null;n=n.parent}return null}function ki(e){var n,r=me;Ft(tl(e));try{e.f&=~wn,Fa(e),n=is(e)}finally{Ft(r)}return n}function La(e){var n=ki(e);if(!e.equals(n)&&(e.wv=ns(),(!ve?.is_fork||e.deps===null)&&(e.v=n,e.deps===null))){Be(e,Xe);return}fn||(Ot!==null?(zi()||ve?.is_fork)&&Ot.set(e,n):wi(e))}let ui=new Set;const un=new Map;let Ha=!1;function kn(e,n){var r={f:0,v:e,reactions:null,equals:Pa,rv:0,wv:0};return r}function rn(e,n){const r=kn(e);return es(r),r}function he(e,n=!1,r=!0){const i=kn(e);return n||(i.equals=Ra),qn&&r&&Oe!==null&&Oe.l!==null&&(Oe.l.s??=[]).push(i),i}function g(e,n,r=!1){ne!==null&&(!Mt||(ne.f&ra)!==0)&&dr()&&(ne.f&(Ze|Zt|bi|ra))!==0&&!Qt?.includes(e)&&To();let i=r?Dn(n):n;return Sn(e,i)}function Sn(e,n){if(!e.equals(n)){var r=e.v;fn?un.set(e,n):un.set(e,r),e.v=n;var i=$t.ensure();if(i.capture(e,r),(e.f&Ze)!==0){const a=e;(e.f&ft)!==0&&ki(a),wi(a)}e.wv=ns(),ja(e,ft),dr()&&me!==null&&(me.f&Xe)!==0&&(me.f&(en|zn))===0&&(zt===null?pl([e]):zt.push(e)),!i.is_fork&&ui.size>0&&!Ha&&nl()}return n}function nl(){Ha=!1;var e=xn;Or(!0);const n=Array.from(ui);try{for(const r of n)(r.f&Xe)!==0&&Be(r,Lt),Gn(r)&&Un(r)}finally{Or(e)}ui.clear()}function rr(e){g(e,e.v+1)}function ja(e,n){var r=e.reactions;if(r!==null)for(var i=dr(),a=r.length,o=0;o<a;o++){var c=r[o],v=c.f;if(!(!i&&c===me)){var _=(v&ft)===0;if(_&&Be(c,n),(v&Ze)!==0){var x=c;Ot?.delete(x),(v&wn)===0&&(v&Et&&(c.f|=wn),ja(x,Lt))}else _&&((v&Zt)!==0&&Wt!==null&&Wt.add(c),Xt(c))}}}function Dn(e){if(typeof e!="object"||e===null||cn in e)return e;const n=hi(e);if(n!==fo&&n!==vo)return e;var r=new Map,i=Dr(e),a=rn(0),o=yn,c=v=>{if(yn===o)return v();var _=ne,x=yn;_t(null),ua(o);var w=v();return _t(_),ua(x),w};return i&&r.set("length",rn(e.length)),new Proxy(e,{defineProperty(v,_,x){(!("value"in x)||x.configurable===!1||x.enumerable===!1||x.writable===!1)&&So();var w=r.get(_);return w===void 0?w=c(()=>{var P=rn(x.value);return r.set(_,P),P}):g(w,x.value,!0),!0},deleteProperty(v,_){var x=r.get(_);if(x===void 0){if(_ in v){const w=c(()=>rn(Qe));r.set(_,w),rr(a)}}else g(x,Qe),rr(a);return!0},get(v,_,x){if(_===cn)return e;var w=r.get(_),P=_ in v;if(w===void 0&&(!P||Fn(v,_)?.writable)&&(w=c(()=>{var E=Dn(P?v[_]:Qe),re=rn(E);return re}),r.set(_,w)),w!==void 0){var S=t(w);return S===Qe?void 0:S}return Reflect.get(v,_,x)},getOwnPropertyDescriptor(v,_){var x=Reflect.getOwnPropertyDescriptor(v,_);if(x&&"value"in x){var w=r.get(_);w&&(x.value=t(w))}else if(x===void 0){var P=r.get(_),S=P?.v;if(P!==void 0&&S!==Qe)return{enumerable:!0,configurable:!0,value:S,writable:!0}}return x},has(v,_){if(_===cn)return!0;var x=r.get(_),w=x!==void 0&&x.v!==Qe||Reflect.has(v,_);if(x!==void 0||me!==null&&(!w||Fn(v,_)?.writable)){x===void 0&&(x=c(()=>{var S=w?Dn(v[_]):Qe,E=rn(S);return E}),r.set(_,x));var P=t(x);if(P===Qe)return!1}return w},set(v,_,x,w){var P=r.get(_),S=_ in v;if(i&&_==="length")for(var E=x;E<P.v;E+=1){var re=r.get(E+"");re!==void 0?g(re,Qe):E in v&&(re=c(()=>rn(Qe)),r.set(E+"",re))}if(P===void 0)(!S||Fn(v,_)?.writable)&&(P=c(()=>rn(void 0)),g(P,Dn(x)),r.set(_,P));else{S=P.v!==Qe;var we=c(()=>Dn(x));g(P,we)}var C=Reflect.getOwnPropertyDescriptor(v,_);if(C?.set&&C.set.call(w,x),!S){if(i&&typeof _=="string"){var $=r.get("length"),te=Number(_);Number.isInteger(te)&&te>=$.v&&g($,te+1)}rr(a)}return!0},ownKeys(v){t(a);var _=Reflect.ownKeys(v).filter(P=>{var S=r.get(P);return S===void 0||S.v!==Qe});for(var[x,w]of r)w.v!==Qe&&!(x in v)&&_.push(x);return _},setPrototypeOf(){zo()}})}function aa(e){try{if(e!==null&&typeof e=="object"&&cn in e)return e[cn]}catch{}return e}function rl(e,n){return Object.is(aa(e),aa(n))}var sa,Ua,Ba,qa;function il(){if(sa===void 0){sa=window,Ua=/Firefox/.test(navigator.userAgent);var e=Element.prototype,n=Node.prototype,r=Text.prototype;Ba=Fn(n,"firstChild").get,qa=Fn(n,"nextSibling").get,na(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),na(r)&&(r.__t=void 0)}}function Jt(e=""){return document.createTextNode(e)}function Cr(e){return Ba.call(e)}function _r(e){return qa.call(e)}function p(e,n){return Cr(e)}function Me(e,n=!1){{var r=Cr(e);return r instanceof Comment&&r.data===""?_r(r):r}}function b(e,n=1,r=!1){let i=e;for(;n--;)i=_r(i);return i}function al(e){e.textContent=""}function Ga(){return!1}let oa=!1;function sl(){oa||(oa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const n of e.target.elements)n.__on_r?.()})},{capture:!0}))}function Hr(e){var n=ne,r=me;_t(null),Ft(null);try{return e()}finally{_t(n),Ft(r)}}function Si(e,n,r,i=r){e.addEventListener(n,()=>Hr(r));const a=e.__on_r;a?e.__on_r=()=>{a(),i(!0)}:e.__on_r=()=>i(!0),sl()}function Ya(e){me===null&&(ne===null&&yo(),xo()),fn&&bo()}function ol(e,n){var r=n.last;r===null?n.last=n.first=e:(r.next=e,e.prev=r,n.last=e)}function Ht(e,n,r){var i=me;i!==null&&(i.f&yt)!==0&&(e|=yt);var a={ctx:Oe,deps:null,nodes:null,f:e|ft|Et,first:null,fn:n,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Un(a),a.f|=gi}catch(v){throw pt(a),v}else n!==null&&Xt(a);var o=a;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&Bn)===0&&(o=o.first,(e&Zt)!==0&&(e&Ln)!==0&&o!==null&&(o.f|=Ln)),o!==null&&(o.parent=i,i!==null&&ol(o,i),ne!==null&&(ne.f&Ze)!==0&&(e&zn)===0)){var c=ne;(c.effects??=[]).push(o)}return a}function zi(){return ne!==null&&!Mt}function Ti(e){const n=Ht(fr,null,!1);return Be(n,Xe),n.teardown=e,n}function fi(e){Ya();var n=me.f,r=!ne&&(n&en)!==0&&(n&gi)===0;if(r){var i=Oe;(i.e??=[]).push(e)}else return Wa(e)}function Wa(e){return Ht(Pr|Ta,e,!1)}function ll(e){return Ya(),Ht(fr|Ta,e,!0)}function cl(e){$t.ensure();const n=Ht(zn|Bn,e,!0);return(r={})=>new Promise(i=>{r.outro?bn(n,()=>{pt(n),i(void 0)}):(pt(n),i(void 0))})}function ir(e){return Ht(Pr,e,!1)}function Ct(e,n){var r=Oe,i={effect:null,ran:!1,deps:e};r.l.$.push(i),i.effect=pr(()=>{e(),!i.ran&&(i.ran=!0,d(n))})}function ul(){var e=Oe;pr(()=>{for(var n of e.l.$){n.deps();var r=n.effect;(r.f&Xe)!==0&&r.deps!==null&&Be(r,Lt),Gn(r)&&Un(r),n.ran=!1}})}function fl(e){return Ht(bi|Bn,e,!0)}function pr(e,n=0){return Ht(fr|n,e,!0)}function F(e,n=[],r=[],i=[]){Qo(i,n,r,a=>{Ht(fr,()=>e(...a.map(t)),!0)})}function Ai(e,n=0){var r=Ht(Zt|n,e,!0);return r}function At(e){return Ht(en|Bn,e,!0)}function Ka(e){var n=e.teardown;if(n!==null){const r=fn,i=ne;ca(!0),_t(null);try{n.call(null)}finally{ca(r),_t(i)}}}function Va(e,n=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const a=r.ac;a!==null&&Hr(()=>{a.abort(In)});var i=r.next;(r.f&zn)!==0?r.parent=null:pt(r,n),r=i}}function dl(e){for(var n=e.first;n!==null;){var r=n.next;(n.f&en)===0&&pt(n),n=r}}function pt(e,n=!0){var r=!1;(n||(e.f&za)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(vl(e.nodes.start,e.nodes.end),r=!0),Va(e,n&&!r),Mr(e,0),Be(e,Vt);var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)o.stop();Ka(e);var a=e.parent;a!==null&&a.first!==null&&Ja(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function vl(e,n){for(;e!==null;){var r=e===n?null:_r(e);e.remove(),e=r}}function Ja(e){var n=e.parent,r=e.prev,i=e.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),n!==null&&(n.first===e&&(n.first=i),n.last===e&&(n.last=r))}function bn(e,n,r=!0){var i=[];Qa(e,i,!0);var a=()=>{r&&pt(e),n&&n()},o=i.length;if(o>0){var c=()=>--o||a();for(var v of i)v.out(c)}else a()}function Qa(e,n,r){if((e.f&yt)===0){e.f^=yt;var i=e.nodes&&e.nodes.t;if(i!==null)for(const v of i)(v.is_global||r)&&n.push(v);for(var a=e.first;a!==null;){var o=a.next,c=(a.f&Ln)!==0||(a.f&en)!==0&&(e.f&Zt)!==0;Qa(a,n,c?r:!1),a=o}}}function Ei(e){Xa(e,!0)}function Xa(e,n){if((e.f&yt)!==0){e.f^=yt,(e.f&Xe)===0&&(Be(e,ft),Xt(e));for(var r=e.first;r!==null;){var i=r.next,a=(r.f&Ln)!==0||(r.f&en)!==0;Xa(r,a?n:!1),r=i}var o=e.nodes&&e.nodes.t;if(o!==null)for(const c of o)(c.is_global||n)&&c.in()}}function Za(e,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end;r!==null;){var a=r===i?null:_r(r);n.append(r),r=a}}let Nn=null;function _l(e){var n=Nn;try{if(Nn=new Set,d(e),n!==null)for(var r of Nn)n.add(r);return Nn}finally{Nn=n}}function la(e){for(var n of _l(e))Sn(n,n.v)}let xn=!1;function Or(e){xn=e}let fn=!1;function ca(e){fn=e}let ne=null,Mt=!1;function _t(e){ne=e}let me=null;function Ft(e){me=e}let Qt=null;function es(e){ne!==null&&(Qt===null?Qt=[e]:Qt.push(e))}let ut=null,xt=0,zt=null;function pl(e){zt=e}let ts=1,ur=0,yn=ur;function ua(e){yn=e}function ns(){return++ts}function Gn(e){var n=e.f;if((n&ft)!==0)return!0;if(n&Ze&&(e.f&=~wn),(n&Lt)!==0){for(var r=e.deps,i=r.length,a=0;a<i;a++){var o=r[a];if(Gn(o)&&La(o),o.wv>e.wv)return!0}(n&Et)!==0&&Ot===null&&Be(e,Xe)}return!1}function rs(e,n,r=!0){var i=e.reactions;if(i!==null&&!Qt?.includes(e))for(var a=0;a<i.length;a++){var o=i[a];(o.f&Ze)!==0?rs(o,n,!1):n===o&&(r?Be(o,ft):(o.f&Xe)!==0&&Be(o,Lt),Xt(o))}}function is(e){var n=ut,r=xt,i=zt,a=ne,o=Qt,c=Oe,v=Mt,_=yn,x=e.f;ut=null,xt=0,zt=null,ne=(x&(en|zn))===0?e:null,Qt=null,Hn(e.ctx),Mt=!1,yn=++ur,e.ac!==null&&(Hr(()=>{e.ac.abort(In)}),e.ac=null);try{e.f|=li;var w=e.fn,P=w(),S=e.deps;if(ut!==null){var E;if(Mr(e,xt),S!==null&&xt>0)for(S.length=xt+ut.length,E=0;E<ut.length;E++)S[xt+E]=ut[E];else e.deps=S=ut;if(zi()&&(e.f&Et)!==0)for(E=xt;E<S.length;E++)(S[E].reactions??=[]).push(e)}else S!==null&&xt<S.length&&(Mr(e,xt),S.length=xt);if(dr()&&zt!==null&&!Mt&&S!==null&&(e.f&(Ze|Lt|ft))===0)for(E=0;E<zt.length;E++)rs(zt[E],e);return a!==null&&a!==e&&(ur++,zt!==null&&(i===null?i=zt:i.push(...zt))),(e.f&ln)!==0&&(e.f^=ln),P}catch(re){return Oa(re)}finally{e.f^=li,ut=n,xt=r,zt=i,ne=a,Qt=o,Hn(c),Mt=v,yn=_}}function hl(e,n){let r=n.reactions;if(r!==null){var i=co.call(r,e);if(i!==-1){var a=r.length-1;a===0?r=n.reactions=null:(r[i]=r[a],r.pop())}}if(r===null&&(n.f&Ze)!==0&&(ut===null||!ut.includes(n))){var o=n;(o.f&Et)!==0&&(o.f^=Et,o.f&=~wn),wi(o),Fa(o),Mr(o,0)}}function Mr(e,n){var r=e.deps;if(r!==null)for(var i=n;i<r.length;i++)hl(e,r[i])}function Un(e){var n=e.f;if((n&Vt)===0){Be(e,Xe);var r=me,i=xn;me=e,xn=!0;try{(n&(Zt|Sa))!==0?dl(e):Va(e),Ka(e);var a=is(e);e.teardown=typeof a=="function"?a:null,e.wv=ts;var o;si&&jo&&(e.f&ft)!==0&&e.deps}finally{xn=i,me=r}}}async function ml(){await Promise.resolve(),Go()}function t(e){var n=e.f,r=(n&Ze)!==0;if(Nn?.add(e),ne!==null&&!Mt){var i=me!==null&&(me.f&Vt)!==0;if(!i&&!Qt?.includes(e)){var a=ne.deps;if((ne.f&li)!==0)e.rv<ur&&(e.rv=ur,ut===null&&a!==null&&a[xt]===e?xt++:ut===null?ut=[e]:ut.includes(e)||ut.push(e));else{(ne.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[ne]:o.includes(ne)||o.push(ne)}}}if(fn&&un.has(e))return un.get(e);if(r){var c=e;if(fn){var v=c.v;return((c.f&Xe)===0&&c.reactions!==null||ss(c))&&(v=ki(c)),un.set(c,v),v}var _=(c.f&Et)===0&&!Mt&&ne!==null&&(xn||(ne.f&Et)!==0),x=c.deps===null;Gn(c)&&(_&&(c.f|=Et),La(c)),_&&!x&&as(c)}if(Ot?.has(e))return Ot.get(e);if((e.f&ln)!==0)throw e.v;return e.v}function as(e){if(e.deps!==null){e.f|=Et;for(const n of e.deps)(n.reactions??=[]).push(e),(n.f&Ze)!==0&&(n.f&Et)===0&&as(n)}}function ss(e){if(e.v===Qe)return!0;if(e.deps===null)return!1;for(const n of e.deps)if(un.has(n)||(n.f&Ze)!==0&&ss(n))return!0;return!1}function d(e){var n=Mt;try{return Mt=!0,e()}finally{Mt=n}}function z(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(cn in e)di(e);else if(!Array.isArray(e))for(let n in e){const r=e[n];typeof r=="object"&&r&&cn in r&&di(r)}}}function di(e,n=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!n.has(e)){n.add(e),e instanceof Date&&e.getTime();for(let i in e)try{di(e[i],n)}catch{}const r=hi(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=wa(r);for(let a in i){const o=i[a].get;if(o)try{o.call(e)}catch{}}}}}const gl=["touchstart","touchmove"];function bl(e){return gl.includes(e)}const xl=new Set,fa=new Set;function yl(e,n,r,i={}){function a(o){if(i.capture||Xn.call(n,o),!o.cancelBubble)return Hr(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?vr(()=>{n.addEventListener(e,a,i)}):n.addEventListener(e,a,i),a}function ue(e,n,r,i,a){var o={capture:i,passive:a},c=yl(e,n,r,o);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&Ti(()=>{n.removeEventListener(e,c,o)})}let da=null;function Xn(e){var n=this,r=n.ownerDocument,i=e.type,a=e.composedPath?.()||[],o=a[0]||e.target;da=e;var c=0,v=da===e&&e.__root;if(v){var _=a.indexOf(v);if(_!==-1&&(n===document||n===window)){e.__root=n;return}var x=a.indexOf(n);if(x===-1)return;_<=x&&(c=_)}if(o=a[c]||e.target,o!==n){uo(e,"currentTarget",{configurable:!0,get(){return o||r}});var w=ne,P=me;_t(null),Ft(null);try{for(var S,E=[];o!==null;){var re=o.assignedSlot||o.parentNode||o.host||null;try{var we=o["__"+i];we!=null&&(!o.disabled||e.target===o)&&we.call(o,e)}catch(C){S?E.push(C):S=C}if(e.cancelBubble||re===n||re===null)break;o=re}if(S){for(let C of E)queueMicrotask(()=>{throw C});throw S}}finally{e.__root=n,delete e.currentTarget,_t(w),Ft(P)}}}function wl(e){var n=document.createElement("template");return n.innerHTML=e.replaceAll("<!>","<!---->"),n.content}function Nr(e,n){var r=me;r.nodes===null&&(r.nodes={start:e,end:n,a:null,t:null})}function R(e,n){var r=(n&Io)!==0,i=(n&Do)!==0,a,o=!e.startsWith("<!>");return()=>{a===void 0&&(a=wl(o?e:"<!>"+e),r||(a=Cr(a)));var c=i||Ua?document.importNode(a,!0):a.cloneNode(!0);if(r){var v=Cr(c),_=c.lastChild;Nr(v,_)}else Nr(c,c);return c}}function Xr(e=""){{var n=Jt(e+"");return Nr(n,n),n}}function bt(){var e=document.createDocumentFragment(),n=document.createComment(""),r=Jt();return e.append(n,r),Nr(n,r),e}function k(e,n){e!==null&&e.before(n)}function U(e,n){var r=n==null?"":typeof n=="object"?n+"":n;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function kl(e,n){return Sl(e,n)}const On=new Map;function Sl(e,{target:n,anchor:r,props:i={},events:a,context:o,intro:c=!0}){il();var v=new Set,_=P=>{for(var S=0;S<P.length;S++){var E=P[S];if(!v.has(E)){v.add(E);var re=bl(E);n.addEventListener(E,Xn,{passive:re});var we=On.get(E);we===void 0?(document.addEventListener(E,Xn,{passive:re}),On.set(E,1)):On.set(E,we+1)}}};_($r(xl)),fa.add(_);var x=void 0,w=cl(()=>{var P=r??n.appendChild(Jt());return Vo(P,{pending:()=>{}},S=>{if(o){xi({});var E=Oe;E.c=o}a&&(i.$$events=a),x=e(S,i)||{},o&&yi()}),()=>{for(var S of v){n.removeEventListener(S,Xn);var E=On.get(S);--E===0?(document.removeEventListener(S,Xn),On.delete(S)):On.set(S,E)}fa.delete(_),P!==r&&P.parentNode?.removeChild(P)}});return zl.set(x,w),x}let zl=new WeakMap;class Tl{anchor;#t=new Map;#s=new Map;#e=new Map;#i=new Set;#a=!0;constructor(n,r=!0){this.anchor=n,this.#a=r}#r=()=>{var n=ve;if(this.#t.has(n)){var r=this.#t.get(n),i=this.#s.get(r);if(i)Ei(i),this.#i.delete(r);else{var a=this.#e.get(r);a&&(this.#s.set(r,a.effect),this.#e.delete(r),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),i=a.effect)}for(const[o,c]of this.#t){if(this.#t.delete(o),o===n)break;const v=this.#e.get(c);v&&(pt(v.effect),this.#e.delete(c))}for(const[o,c]of this.#s){if(o===r||this.#i.has(o))continue;const v=()=>{if(Array.from(this.#t.values()).includes(o)){var x=document.createDocumentFragment();Za(c,x),x.append(Jt()),this.#e.set(o,{effect:c,fragment:x})}else pt(c);this.#i.delete(o),this.#s.delete(o)};this.#a||!i?(this.#i.add(o),bn(c,v,!1)):v()}}};#n=n=>{this.#t.delete(n);const r=Array.from(this.#t.values());for(const[i,a]of this.#e)r.includes(i)||(pt(a.effect),this.#e.delete(i))};ensure(n,r){var i=ve,a=Ga();if(r&&!this.#s.has(n)&&!this.#e.has(n))if(a){var o=document.createDocumentFragment(),c=Jt();o.append(c),this.#e.set(n,{effect:At(()=>r(c)),fragment:o})}else this.#s.set(n,At(()=>r(this.anchor)));if(this.#t.set(i,n),a){for(const[v,_]of this.#s)v===n?i.skipped_effects.delete(_):i.skipped_effects.add(_);for(const[v,_]of this.#e)v===n?i.skipped_effects.delete(_.effect):i.skipped_effects.add(_.effect);i.oncommit(this.#r),i.ondiscard(this.#n)}else this.#r()}}function M(e,n,r=!1){var i=new Tl(e),a=r?Ln:0;function o(c,v){i.ensure(c,v)}Ai(()=>{var c=!1;n((v,_=!0)=>{c=!0,o(_,v)}),c||o(!1,null)},a)}function Gt(e,n){return n}function Al(e,n,r){for(var i=[],a=n.length,o,c=n.length,v=0;v<a;v++){let P=n[v];bn(P,()=>{if(o){if(o.pending.delete(P),o.done.add(P),o.pending.size===0){var S=e.outrogroups;vi($r(o.done)),S.delete(o),S.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var _=i.length===0&&r!==null;if(_){var x=r,w=x.parentNode;al(w),w.append(x),e.items.clear()}vi(n,!_)}else o={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(o)}function vi(e,n=!0){for(var r=0;r<e.length;r++)pt(e[r],n)}var va;function Ie(e,n,r,i,a,o=null){var c=e,v=new Map,_=(n&Ea)!==0;if(_){var x=e;c=x.appendChild(Jt())}var w=null,P=I(()=>{var $=r();return Dr($)?$:$==null?[]:$r($)}),S,E=!0;function re(){C.fallback=w,El(C,S,c,n,i),w!==null&&(S.length===0?(w.f&Kt)===0?Ei(w):(w.f^=Kt,Zn(w,null,c)):bn(w,()=>{w=null}))}var we=Ai(()=>{S=t(P);for(var $=S.length,te=new Set,l=ve,f=Ga(),ke=0;ke<$;ke+=1){var _e=S[ke],Le=i(_e,ke),le=E?null:v.get(Le);le?(le.v&&Sn(le.v,_e),le.i&&Sn(le.i,ke),f&&l.skipped_effects.delete(le.e)):(le=Pl(v,E?c:va??=Jt(),_e,Le,ke,a,n,r),E||(le.e.f|=Kt),v.set(Le,le)),te.add(Le)}if($===0&&o&&!w&&(E?w=At(()=>o(c)):(w=At(()=>o(va??=Jt())),w.f|=Kt)),!E)if(f){for(const[qe,et]of v)te.has(qe)||l.skipped_effects.add(et.e);l.oncommit(re),l.ondiscard(()=>{})}else re();t(P)}),C={effect:we,items:v,outrogroups:null,fallback:w};E=!1}function El(e,n,r,i,a){var o=(i&Ro)!==0,c=n.length,v=e.items,_=e.effect.first,x,w=null,P,S=[],E=[],re,we,C,$;if(o)for($=0;$<c;$+=1)re=n[$],we=a(re,$),C=v.get(we).e,(C.f&Kt)===0&&(C.nodes?.a?.measure(),(P??=new Set).add(C));for($=0;$<c;$+=1){if(re=n[$],we=a(re,$),C=v.get(we).e,e.outrogroups!==null)for(const et of e.outrogroups)et.pending.delete(C),et.done.delete(C);if((C.f&Kt)!==0)if(C.f^=Kt,C===_)Zn(C,null,r);else{var te=w?w.next:_;C===e.effect.last&&(e.effect.last=C.prev),C.prev&&(C.prev.next=C.next),C.next&&(C.next.prev=C.prev),an(e,w,C),an(e,C,te),Zn(C,te,r),w=C,S=[],E=[],_=w.next;continue}if((C.f&yt)!==0&&(Ei(C),o&&(C.nodes?.a?.unfix(),(P??=new Set).delete(C))),C!==_){if(x!==void 0&&x.has(C)){if(S.length<E.length){var l=E[0],f;w=l.prev;var ke=S[0],_e=S[S.length-1];for(f=0;f<S.length;f+=1)Zn(S[f],l,r);for(f=0;f<E.length;f+=1)x.delete(E[f]);an(e,ke.prev,_e.next),an(e,w,ke),an(e,_e,l),_=l,w=_e,$-=1,S=[],E=[]}else x.delete(C),Zn(C,_,r),an(e,C.prev,C.next),an(e,C,w===null?e.effect.first:w.next),an(e,w,C),w=C;continue}for(S=[],E=[];_!==null&&_!==C;)(x??=new Set).add(_),E.push(_),_=_.next;if(_===null)continue}(C.f&Kt)===0&&S.push(C),w=C,_=C.next}if(e.outrogroups!==null){for(const et of e.outrogroups)et.pending.size===0&&(vi($r(et.done)),e.outrogroups?.delete(et));e.outrogroups.size===0&&(e.outrogroups=null)}if(_!==null||x!==void 0){var Le=[];if(x!==void 0)for(C of x)(C.f&yt)===0&&Le.push(C);for(;_!==null;)(_.f&yt)===0&&_!==e.fallback&&Le.push(_),_=_.next;var le=Le.length;if(le>0){var qe=(i&Ea)!==0&&c===0?r:null;if(o){for($=0;$<le;$+=1)Le[$].nodes?.a?.measure();for($=0;$<le;$+=1)Le[$].nodes?.a?.fix()}Al(e,Le,qe)}}o&&vr(()=>{if(P!==void 0)for(C of P)C.nodes?.a?.apply()})}function Pl(e,n,r,i,a,o,c,v){var _=(c&Eo)!==0?(c&Co)===0?he(r,!1,!1):kn(r):null,x=(c&Po)!==0?kn(a):null;return{v:_,i:x,e:At(()=>(o(n,_??r,x??a,v),()=>{e.delete(i)}))}}function Zn(e,n,r){if(e.nodes)for(var i=e.nodes.start,a=e.nodes.end,o=n&&(n.f&Kt)===0?n.nodes.start:r;i!==null;){var c=_r(i);if(o.before(i),i===a)return;i=c}}function an(e,n,r){n===null?e.effect.first=r:n.next=r,r===null?e.effect.last=n:r.prev=n}function Rl(e,n,r){ir(()=>{var i=d(()=>n(e,r?.())||{});if(i?.destroy)return()=>i.destroy()})}function os(e){var n,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(n=0;n<a;n++)e[n]&&(r=os(e[n]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function Cl(){for(var e,n,r=0,i="",a=arguments.length;r<a;r++)(e=arguments[r])&&(n=os(e))&&(i&&(i+=" "),i+=n);return i}function Ol(e){return typeof e=="object"?Cl(e):e??""}function Ml(e,n,r){var i=e==null?"":""+e;return i===""?null:i}function Nl(e,n){return e==null?null:String(e)}function Ce(e,n,r,i,a,o){var c=e.__className;if(c!==r||c===void 0){var v=Ml(r);v==null?e.removeAttribute("class"):e.className=v,e.__className=r}return o}function Il(e,n,r,i){var a=e.__style;if(a!==n){var o=Nl(n);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=n}return i}function ar(e,n,r=!1){if(e.multiple){if(n==null)return;if(!Dr(n))return Fo();for(var i of e.options)i.selected=n.includes(sr(i));return}for(i of e.options){var a=sr(i);if(rl(a,n)){i.selected=!0;return}}(!r||n!==void 0)&&(e.selectedIndex=-1)}function Ar(e){var n=new MutationObserver(()=>{ar(e,e.__value)});n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ti(()=>{n.disconnect()})}function _a(e,n,r=n){var i=new WeakSet,a=!0;Si(e,"change",o=>{var c=o?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(c),sr);else{var _=e.querySelector(c)??e.querySelector("option:not([disabled])");v=_&&sr(_)}r(v),ve!==null&&i.add(ve)}),ir(()=>{var o=n();if(e===document.activeElement){var c=tr??ve;if(i.has(c))return}if(ar(e,o,a),a&&o===void 0){var v=e.querySelector(":checked");v!==null&&(o=sr(v),r(o))}e.__value=o,a=!1}),Ar(e)}function sr(e){return"__value"in e?e.__value:e.value}const Dl=Symbol("is custom element"),$l=Symbol("is html");function Qn(e,n){var r=Pi(e);r.value===(r.value=n??void 0)||e.value===n&&(n!==0||e.nodeName!=="PROGRESS")||(e.value=n??"")}function zr(e,n){var r=Pi(e);r.checked!==(r.checked=n??void 0)&&(e.checked=n)}function or(e,n,r,i){var a=Pi(e);a[n]!==(a[n]=r)&&(n==="loading"&&(e[mo]=r),r==null?e.removeAttribute(n):typeof r!="string"&&Fl(e).includes(n)?e[n]=r:e.setAttribute(n,r))}function Pi(e){return e.__attributes??={[Dl]:e.nodeName.includes("-"),[$l]:e.namespaceURI===$o}}var pa=new Map;function Fl(e){var n=e.getAttribute("is")||e.nodeName,r=pa.get(n);if(r)return r;pa.set(n,r=[]);for(var i,a=e,o=Element.prototype;o!==a;){i=wa(a);for(var c in i)i[c].set&&r.push(c);a=hi(a)}return r}function Ll(e,n,r=n){var i=new WeakSet;Si(e,"input",async a=>{var o=a?e.defaultValue:e.value;if(o=Zr(e)?ei(o):o,r(o),ve!==null&&i.add(ve),await ml(),o!==(o=n())){var c=e.selectionStart,v=e.selectionEnd,_=e.value.length;if(e.value=o??"",v!==null){var x=e.value.length;c===v&&v===_&&x>_?(e.selectionStart=x,e.selectionEnd=x):(e.selectionStart=c,e.selectionEnd=Math.min(v,x))}}}),d(n)==null&&e.value&&(r(Zr(e)?ei(e.value):e.value),ve!==null&&i.add(ve)),pr(()=>{var a=n();if(e===document.activeElement){var o=tr??ve;if(i.has(o))return}Zr(e)&&a===ei(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Hl(e,n,r=n){Si(e,"change",i=>{var a=i?e.defaultChecked:e.checked;r(a)}),d(n)==null&&r(e.checked),pr(()=>{var i=n();e.checked=!!i})}function Zr(e){var n=e.type;return n==="number"||n==="range"}function ei(e){return e===""?null:+e}function ls(e=!1){const n=Oe,r=n.l.u;if(!r)return;let i=()=>z(n.s);if(e){let a=0,o={};const c=Lr(()=>{let v=!1;const _=n.s;for(const x in _)_[x]!==o[x]&&(o[x]=_[x],v=!0);return v&&a++,a});i=()=>t(c)}r.b.length&&ll(()=>{ha(n,i),oi(r.b)}),fi(()=>{const a=d(()=>r.m.map(_o));return()=>{for(const o of a)typeof o=="function"&&o()}}),r.a.length&&fi(()=>{ha(n,i),oi(r.a)})}function ha(e,n){if(e.l.s)for(const r of e.l.s)t(r);n()}function jl(e,n){var r=e.$$events?.[n.type],i=Dr(r)?r.slice():r==null?[]:[r];for(var a of i)a.call(this,n)}let Tr=!1;function Ul(e){var n=Tr;try{return Tr=!1,[e(),Tr]}finally{Tr=n}}function sn(e,n,r,i){var a=!qn||(r&Oo)!==0,o=(r&No)!==0,c=i,v=!0,_=()=>(v&&(v=!1,c=i),c),x;{var w=cn in e||ho in e;x=Fn(e,n)?.set??(w&&n in e?te=>e[n]=te:void 0)}var P,S=!1;[P,S]=Ul(()=>e[n]),P===void 0&&i!==void 0&&(P=_(),x&&(a&&ko(),x(P)));var E;if(a?E=()=>{var te=e[n];return te===void 0?_():(v=!0,te)}:E=()=>{var te=e[n];return te!==void 0&&(c=void 0),te===void 0?c:te},a&&(r&Mo)===0)return E;if(x){var re=e.$$legacy;return(function(te,l){return arguments.length>0?((!a||!l||re||S)&&x(l?E():te),te):E()})}var we=!1,C=I(()=>(we=!1,E()));t(C);var $=me;return(function(te,l){if(arguments.length>0){const f=l?t(C):a&&o?Dn(te):te;return g(C,f),we=!0,c!==void 0&&(c=f),te}return fn&&we||($.f&Vt)!==0?C.v:t(C)})}function cs(e){Oe===null&&Aa(),qn&&Oe.l!==null?ql(Oe).m.push(e):fi(()=>{const n=d(e);if(typeof n=="function")return n})}function Bl(e){Oe===null&&Aa(),cs(()=>()=>d(e))}function ql(e){var n=e.l;return n.u??={a:[],b:[],m:[]}}const Gl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Gl);Uo();const Yl={Clubs:"clubs",Diamonds:"diamonds",Hearts:"hearts",Spades:"spades"},Wl={Two:"2",Three:"3",Four:"4",Five:"5",Six:"6",Seven:"7",Eight:"8",Nine:"9",Ten:"10",Jack:"jack",Queen:"queen",King:"king",Ace:"ace"},Kl={Clubs:"♣",Diamonds:"♦",Hearts:"♥",Spades:"♠"},Vl={Two:"2",Three:"3",Four:"4",Five:"5",Six:"6",Seven:"7",Eight:"8",Nine:"9",Ten:"10",Jack:"J",Queen:"Q",King:"K",Ace:"A"},Jl="/durak-online/".replace(/\/+$/,"/");function us(e){const n=String(e||"").replace(/^\/+/,"");return`${Jl}${n}`}function Ql(e){if(!e)return null;const n=Wl[e.rank],r=Yl[e.suit];return!n||!r?null:`${n}_of_${r}.png`}function _i(){return us("cards/back.png")}function ma(e){const n=Ql(e);return n?us(`cards/${n}`):_i()}function Yt(e){return Kl[e]||"?"}function vt(e){return e?`${Vl[e.rank]||e.rank}${Yt(e.suit)}`:""}var Xl=R('<div class="absolute inset-0 bg-black/30 rounded-[4px] pointer-events-none"></div> <div class="absolute bottom-0 left-0 right-0 bg-amber-500/80 text-[8px] text-center text-black font-medium py-0.5">known</div>',1),Zl=R('<div class="absolute top-0 right-0 bg-amber-500/80 text-[7px] text-black font-medium px-1 py-0.5 rounded-bl">!</div>'),ec=R('<button><img class="h-full w-full rounded-[4px] bg-zinc-50 object-contain" draggable="false" loading="lazy"/> <!> <!></button>');function Ve(e,n){xi(n,!1);let r=sn(n,"card",8,null),i=sn(n,"faceDown",8,!1),a=sn(n,"selectable",8,!1),o=sn(n,"selected",8,!1),c=sn(n,"disabled",8,!1),v=sn(n,"size",8,"md"),_=sn(n,"known",8,!1),x=sn(n,"revealed",8,!1);const w={sm:"w-12 h-16",md:"w-16 h-24",lg:"w-24 h-36"};ls();var P=ec(),S=p(P),E=b(S,2);{var re=$=>{var te=Xl();k($,te)};M(E,$=>{_()&&$(re)})}var we=b(E,2);{var C=$=>{var te=Zl();k($,te)};M(we,$=>{x()&&$(C)})}F(($,te,l)=>{Ce(P,1,(z(v()),z(a()),z(c()),z(o()),z(_()),z(x()),d(()=>`relative ${w[v()]||w.md} overflow-hidden rounded-md border border-zinc-700/70 bg-zinc-50 p-0.5 shadow-md shadow-black/40 ${a()&&!c()?"hover:-translate-y-1 hover:border-zinc-500":""} ${o()?"ring-2 ring-indigo-500":""} ${c()?"opacity-60":""} ${_()?"ring-1 ring-amber-500/50":""} ${x()?"ring-1 ring-amber-500/60":""}`))),P.disabled=c(),or(P,"aria-label",$),or(S,"src",te),or(S,"alt",l)},[()=>(z(i()),z(vt),z(r()),d(()=>i()?"Face-down card":vt(r()))),()=>(z(i()),z(_i),z(ma),z(r()),d(()=>i()?_i():ma(r()))),()=>(z(i()),z(vt),z(r()),d(()=>i()?"Card back":vt(r())))]),ue("click",P,function($){jl.call(this,n,$)}),k(e,P),yi()}const fs="durak_game_settings",jr=2,H={Human:"Human",Random:"Random",MCTS:"MCTS",Real:"Real"},$n={_version:jr,deckSize:36,numPlayers:2,trumpReflecting:!0,reflecting:!0,numThreads:Math.max(4,Math.min(8,Math.floor((typeof navigator<"u"&&navigator.hardwareConcurrency||8)/2))),playerNames:{P0:"You",P1:"Player 1",P2:"Player 2",P3:"Player 3",P4:"Player 4",P5:"Player 5"},playerTypes:{P0:H.Human,P1:H.MCTS,P2:H.MCTS,P3:H.MCTS,P4:H.MCTS,P5:H.MCTS},computerShuffle:!1,mctsThinkingTimeMs:2e3,mctsDeterminizations:20,showHints:!0,hintDeterminizations:50,hintRollouts:5e3};function tc(e){for(let n=0;n<e.numPlayers;n++){const r=`P${n}`;if(e.playerTypes[r]===H.Human)return r}return null}function nc(){try{const e=localStorage.getItem(fs);if(e){const n=JSON.parse(e);if(!n._version||n._version<jr)return rc(n);const r={...$n,...n,playerNames:{...$n.playerNames,...n.playerNames||{}},playerTypes:{...$n.playerTypes,...n.playerTypes||{}}};for(let i=1;i<6;i++){const a=`P${i}`;r.playerTypes[a]===H.Human&&(r.playerTypes[a]=H.Random)}return r}}catch(e){console.warn("Failed to load settings:",e)}return{...$n}}function rc(e){const n={...$n};return e.deckSize&&(n.deckSize=e.deckSize),e.numPlayers&&(n.numPlayers=e.numPlayers),e.trumpReflecting!==void 0&&(n.trumpReflecting=e.trumpReflecting),e.reflecting!==void 0&&(n.reflecting=e.reflecting),e.numThreads&&(n.numThreads=e.numThreads),e.playerNames&&(n.playerNames={...$n.playerNames,...e.playerNames}),console.log("Migrated settings from version",e._version||1,"to",jr),n}function Je(e){try{localStorage.setItem(fs,JSON.stringify({...e,_version:jr}))}catch(n){console.warn("Failed to save settings:",n)}}function ga(e){return{deck_size:e.deckSize,num_players:e.numPlayers,trump_reflecting:e.trumpReflecting,reflecting:e.reflecting}}function ic(e){const n=Ae.all_cards_deducible(e);if(n[2])throw st(n[1]);return st(n[0])}function ac(e,n){const r=Ae.apply_action(e,n);if(r[2])throw st(r[1]);return st(r[0])}function ba(e){const n=Ae.deduce_cards(e);if(n[2])throw st(n[1]);return st(n[0])}function xa(e){const n=Ae.get_durak(e);if(n[2])throw st(n[1]);return st(n[0])}function ti(e){const n=Ae.legal_actions(e);if(n[2])throw st(n[1]);return st(n[0])}function sc(e,n){const r=Ae.new_computer_game(e,n);if(r[2])throw st(r[1]);return st(r[0])}function oc(e,n){const r=Ae.new_manual_game(e,n);if(r[2])throw st(r[1]);return st(r[0])}function ni(e){const n=Ae.pick_random_action(e);if(n[2])throw st(n[1]);return st(n[0])}function lc(){return{__proto__:null,"./durak_wasm_bg.js":{__proto__:null,__wbg_Error_8c4e43fe74559d73:function(n,r){return Error(ri(n,r))},__wbg_Number_04624de7d0e8332d:function(n){return Number(n)},__wbg___wbindgen_bigint_get_as_i64_8fcf4ce7f1ca72a2:function(n,r){const i=r,a=typeof i=="bigint"?i:void 0;on().setBigInt64(n+8,Mn(a)?BigInt(0):a,!0),on().setInt32(n+0,!Mn(a),!0)},__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:function(n){const r=n,i=typeof r=="boolean"?r:void 0;return Mn(i)?16777215:i?1:0},__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(n,r){const i=pi(r),a=ya(i,Ae.__wbindgen_malloc,Ae.__wbindgen_realloc),o=Ir;on().setInt32(n+4,o,!0),on().setInt32(n+0,a,!0)},__wbg___wbindgen_in_47fa6863be6f2f25:function(n,r){return n in r},__wbg___wbindgen_is_bigint_31b12575b56f32fc:function(n){return typeof n=="bigint"},__wbg___wbindgen_is_function_0095a73b8b156f76:function(n){return typeof n=="function"},__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:function(n){const r=n;return typeof r=="object"&&r!==null},__wbg___wbindgen_is_string_cd444516edc5b180:function(n){return typeof n=="string"},__wbg___wbindgen_is_undefined_9e4d92534c42d778:function(n){return n===void 0},__wbg___wbindgen_jsval_eq_11888390b0186270:function(n,r){return n===r},__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:function(n,r){return n==r},__wbg___wbindgen_number_get_8ff4255516ccad3e:function(n,r){const i=r,a=typeof i=="number"?i:void 0;on().setFloat64(n+8,Mn(a)?0:a,!0),on().setInt32(n+0,!Mn(a),!0)},__wbg___wbindgen_string_get_72fb696202c56729:function(n,r){const i=r,a=typeof i=="string"?i:void 0;var o=Mn(a)?0:ya(a,Ae.__wbindgen_malloc,Ae.__wbindgen_realloc),c=Ir;on().setInt32(n+4,c,!0),on().setInt32(n+0,o,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(n,r){throw new Error(ri(n,r))},__wbg_call_389efe28435a9388:function(){return ii(function(n,r){return n.call(r)},arguments)},__wbg_done_57b39ecd9addfe81:function(n){return n.done},__wbg_entries_58c7934c745daac7:function(n){return Object.entries(n)},__wbg_get_9b94d73e6221f75c:function(n,r){return n[r>>>0]},__wbg_get_b3ed3ad4be2bc8ac:function(){return ii(function(n,r){return Reflect.get(n,r)},arguments)},__wbg_get_with_ref_key_1dc361bd10053bfe:function(n,r){return n[r]},__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:function(n){let r;try{r=n instanceof ArrayBuffer}catch{r=!1}return r},__wbg_instanceof_Map_53af74335dec57f4:function(n){let r;try{r=n instanceof Map}catch{r=!1}return r},__wbg_instanceof_Uint8Array_9b9075935c74707c:function(n){let r;try{r=n instanceof Uint8Array}catch{r=!1}return r},__wbg_isArray_d314bb98fcf08331:function(n){return Array.isArray(n)},__wbg_isSafeInteger_bfbc7332a9768d2a:function(n){return Number.isSafeInteger(n)},__wbg_iterator_6ff6560ca1568e55:function(){return Symbol.iterator},__wbg_length_32ed9a279acd054c:function(n){return n.length},__wbg_length_35a7bace40f36eac:function(n){return n.length},__wbg_new_361308b2356cecd0:function(){return new Object},__wbg_new_3eb36ae241fe6f44:function(){return new Array},__wbg_new_dd2b680c8bf6ae29:function(n){return new Uint8Array(n)},__wbg_next_3482f54c49e8af19:function(){return ii(function(n){return n.next()},arguments)},__wbg_next_418f80d8f5303233:function(n){return n.next},__wbg_prototypesetcall_bdcdcc5842e4d77d:function(n,r,i){Uint8Array.prototype.set.call(uc(n,r),i)},__wbg_random_912284dbf636f269:function(){return Math.random()},__wbg_set_3f1d0b984ed272ed:function(n,r,i){n[r]=i},__wbg_set_f43e577aea94465b:function(n,r,i){n[r>>>0]=i},__wbg_value_0546255b415e96c1:function(n){return n.value},__wbindgen_cast_0000000000000001:function(n){return n},__wbindgen_cast_0000000000000002:function(n){return n},__wbindgen_cast_0000000000000003:function(n,r){return ri(n,r)},__wbindgen_cast_0000000000000004:function(n){return BigInt.asUintN(64,n)},__wbindgen_init_externref_table:function(){const n=Ae.__wbindgen_externrefs,r=n.grow(4);n.set(0,void 0),n.set(r+0,void 0),n.set(r+1,null),n.set(r+2,!0),n.set(r+3,!1)}}}}function cc(e){const n=Ae.__externref_table_alloc();return Ae.__wbindgen_externrefs.set(n,e),n}function pi(e){const n=typeof e;if(n=="number"||n=="boolean"||e==null)return`${e}`;if(n=="string")return`"${e}"`;if(n=="symbol"){const a=e.description;return a==null?"Symbol":`Symbol(${a})`}if(n=="function"){const a=e.name;return typeof a=="string"&&a.length>0?`Function(${a})`:"Function"}if(Array.isArray(e)){const a=e.length;let o="[";a>0&&(o+=pi(e[0]));for(let c=1;c<a;c++)o+=", "+pi(e[c]);return o+="]",o}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let i;if(r&&r.length>1)i=r[1];else return toString.call(e);if(i=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:i}function uc(e,n){return e=e>>>0,lr().subarray(e/1,e/1+n)}let mn=null;function on(){return(mn===null||mn.buffer.detached===!0||mn.buffer.detached===void 0&&mn.buffer!==Ae.memory.buffer)&&(mn=new DataView(Ae.memory.buffer)),mn}function ri(e,n){return e=e>>>0,dc(e,n)}let er=null;function lr(){return(er===null||er.byteLength===0)&&(er=new Uint8Array(Ae.memory.buffer)),er}function ii(e,n){try{return e.apply(this,n)}catch(r){const i=cc(r);Ae.__wbindgen_exn_store(i)}}function Mn(e){return e==null}function ya(e,n,r){if(r===void 0){const v=cr.encode(e),_=n(v.length,1)>>>0;return lr().subarray(_,_+v.length).set(v),Ir=v.length,_}let i=e.length,a=n(i,1)>>>0;const o=lr();let c=0;for(;c<i;c++){const v=e.charCodeAt(c);if(v>127)break;o[a+c]=v}if(c!==i){c!==0&&(e=e.slice(c)),a=r(a,i,i=c+e.length*3,1)>>>0;const v=lr().subarray(a+c,a+i),_=cr.encodeInto(e,v);c+=_.written,a=r(a,i,c,1)>>>0}return Ir=c,a}function st(e){const n=Ae.__wbindgen_externrefs.get(e);return Ae.__externref_table_dealloc(e),n}let Er=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Er.decode();const fc=2146435072;let ai=0;function dc(e,n){return ai+=n,ai>=fc&&(Er=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Er.decode(),ai=n),Er.decode(lr().subarray(e,e+n))}const cr=new TextEncoder;"encodeInto"in cr||(cr.encodeInto=function(e,n){const r=cr.encode(e);return n.set(r),{read:e.length,written:r.length}});let Ir=0,Ae;function vc(e,n){return Ae=e.exports,mn=null,er=null,Ae.__wbindgen_start(),Ae}async function _c(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(a){if(e.ok&&r(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",a);else throw a}const i=await e.arrayBuffer();return await WebAssembly.instantiate(i,n)}else{const i=await WebAssembly.instantiate(e,n);return i instanceof WebAssembly.Instance?{instance:i,module:e}:i}function r(i){switch(i){case"basic":case"cors":case"default":return!0}return!1}}async function pc(e){if(Ae!==void 0)return Ae;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),e===void 0&&(e=new URL("/durak-online/assets/durak_wasm_bg-FivqPYsn.wasm",import.meta.url));const n=lc();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:i}=await _c(await e,n);return vc(r)}var hc=R('<div class="mt-3 rounded-lg border border-red-900/60 bg-red-950/40 p-3 text-sm text-red-200"><span class="font-medium">Error:</span> <span class="font-mono text-xs"> </span></div>'),mc=R('<span class="px-2 py-1 text-xs font-medium text-indigo-300">You</span>'),gc=R('<input type="text" class="w-16 px-1.5 py-1 text-xs bg-zinc-800 border-none text-white focus:outline-none"/>'),bc=R('<button class="px-2 py-1 text-xs font-medium text-zinc-300 hover:bg-zinc-800" title="Click to rename"> </button>'),xc=R('<select class="h-6 px-1 text-xs bg-zinc-900 border-l border-zinc-700 text-zinc-400 focus:outline-none cursor-pointer"><option>Random</option><option>MCTS</option></select>'),yc=R('<span class="h-6 flex items-center px-1.5 text-xs border-l border-zinc-700 text-indigo-400">Human</span>'),wc=R('<span class="h-6 flex items-center px-1.5 text-xs border-l border-zinc-700 text-indigo-400"> </span>'),kc=R("<div><!> <!></div>"),Sc=R('<button class="w-6 h-6 flex items-center justify-center rounded text-xs bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200 disabled:opacity-30">−</button> <button class="w-6 h-6 flex items-center justify-center rounded text-xs bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200 disabled:opacity-30">+</button>',1),zc=R('<div class="flex items-center gap-2"><label class="flex items-center gap-1 text-xs text-zinc-400"><span>Time:</span> <input type="number" min="500" max="30000" step="500" class="w-16 px-1 py-0.5 rounded text-xs bg-zinc-800 border border-zinc-700"/> <span class="text-zinc-500">ms</span></label> <label class="flex items-center gap-1 text-xs text-zinc-400"><span>Determinizations:</span> <input type="number" min="1" max="100" class="w-12 px-1 py-0.5 rounded text-xs bg-zinc-800 border border-zinc-700"/></label></div>'),Tc=R('<button class="ml-auto rounded-md border border-zinc-700 bg-zinc-950 px-3 py-1 text-xs font-medium hover:bg-zinc-900">Change</button>'),Ac=R('<div class="text-xs text-zinc-500 mb-3">Select the card at the bottom of the deck.</div> <div class="grid grid-cols-6 sm:grid-cols-9 md:grid-cols-12 gap-1 max-h-64 overflow-y-auto p-1"></div>',1),Ec=R('<div class="flex items-center gap-3"><!> <div><div class="text-sm text-zinc-300 font-medium"> </div> <div class="text-xs text-zinc-500 mt-1">Trump: <span class="text-amber-400 font-medium"> </span></div></div></div>'),Pc=R('<div class="text-xs text-zinc-500 self-center">Click cards below to add.</div>'),Rc=R('<div class="mt-3"><div class="text-xs text-zinc-400 mb-2"> </div> <div class="flex flex-wrap gap-1"></div></div>'),Cc=R('<div class="rounded-lg border border-zinc-800 bg-zinc-950/30 p-4"><div class="flex items-center gap-2 mb-3"><span>2</span> <span class="text-sm font-medium text-zinc-300">Select your 6 hand cards</span> <span class="text-xs text-zinc-500 ml-auto"> </span></div> <div class="flex flex-wrap gap-2 min-h-[4rem] p-2 rounded border border-zinc-800 bg-zinc-950/50"><!> <!></div> <!></div>'),Oc=R('Your lowest: <span class="text-zinc-300 font-medium"> </span>',1),Mc=R('<div class="flex items-center gap-2 ml-2 px-2 py-1 rounded border border-indigo-600/50 bg-indigo-950/30"><!> <button class="text-xs text-zinc-400 hover:text-zinc-200">✕</button></div>'),Nc=R("<button><!></button>"),Ic=R('<div><div class="text-xs text-zinc-400 mb-2"> </div> <div class="flex flex-wrap items-center gap-2"><button>No Trump</button> <!></div></div>'),Dc=R('<div class="flex items-center justify-between p-4 rounded-lg border border-zinc-800 bg-zinc-950/30"><div><div> </div> <div class="text-xs text-zinc-500">(By lowest trump)</div></div> <button class="rounded-md bg-indigo-600 px-6 py-2.5 text-sm font-medium hover:bg-indigo-500">Start Game</button></div>'),$c=R(`<div class="rounded-lg border border-zinc-800 bg-zinc-950/30 p-4"><div class="flex items-center gap-2 mb-3"><span>3</span> <span class="text-sm font-medium text-zinc-300">Opponent's lowest trump <span class="text-amber-400"> </span></span></div> <div class="text-xs text-zinc-500 mb-3"><!></div> <div class="space-y-4"></div></div> <!>`,1),Fc=R('<div class="mt-3 rounded-xl border border-zinc-800 bg-zinc-900/40 p-4 space-y-4"><div class="rounded-lg border border-zinc-800 bg-zinc-950/30 p-4"><div class="text-sm font-medium text-zinc-300 mb-3">Game Rules</div> <div class="grid gap-4 sm:grid-cols-3"><label class="block"><span class="text-xs text-zinc-400">Deck Size</span> <select class="mt-1 w-full rounded-md border border-zinc-700 bg-zinc-950 px-2 py-1.5 text-sm"><option>32 cards (7-Ace)</option><option>36 cards (6-Ace)</option><option>40 cards (5-Ace)</option><option>44 cards (4-Ace)</option><option>48 cards (3-Ace)</option><option>52 cards (2-Ace)</option></select></label> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="h-4 w-4 rounded border-zinc-700 bg-zinc-950 text-indigo-600"/> <div><span class="text-sm text-zinc-300">Trump Reflecting</span> <p class="text-[10px] text-zinc-500">Show trump to redirect</p></div></label> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="h-4 w-4 rounded border-zinc-700 bg-zinc-950 text-indigo-600"/> <div><span class="text-sm text-zinc-300">Reflecting</span> <p class="text-[10px] text-zinc-500">Same rank to redirect</p></div></label></div></div> <div class="rounded-lg border border-zinc-800 bg-zinc-950/30 p-4"><div class="flex items-center gap-2 mb-3"><span>1</span> <span class="text-sm font-medium text-zinc-300">Trump card (bottom of deck)</span> <!></div> <!></div> <!> <!></div>'),Lc=R("<div><div><!></div></div>"),Hc=R("<span> </span>"),jc=R('<span class="text-[10px] px-1.5 py-0.5 rounded bg-zinc-800 text-zinc-300"> </span>'),Uc=R('<span class="text-[10px] text-amber-400"> </span>'),Bc=R('<label class="flex items-center gap-1 text-[10px] text-zinc-500 cursor-pointer"><input type="checkbox" class="rounded w-3 h-3"/> Show</label>'),qc=R("<!> <!>",1),Gc=R('<div class="text-xs text-zinc-500">No cards</div>'),Yc=R('<div><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span> </span> <!> <!> <!></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-zinc-500"> </span></div></div> <div class="mt-2 flex flex-wrap gap-2"><!> <!></div></div>'),Wc=R('<div class="absolute left-6 top-6"><!></div>'),Kc=R('<div class="relative"><!> <!></div>'),Vc=R('<div class="text-xs text-zinc-500">No cards on table.</div>'),Jc=R('<div class="text-3xl"> </div>'),Qc=R('<div class="flex-shrink-0 flex flex-col items-center justify-center gap-2 sm:w-24"><div class="text-xs text-zinc-400">Trump</div> <!> <div class="text-xs text-zinc-500 text-center"> </div></div>'),Xc=R('<div class="mt-4 rounded-lg border-2 border-amber-500/50 bg-amber-950/20 p-4"><div class="text-sm font-medium text-amber-300 mb-2"> </div> <div class="text-xs text-zinc-400 mb-3"> </div> <div class="flex flex-wrap gap-1.5 max-h-48 overflow-y-auto"></div></div>'),Zc=R("<span> </span>"),eu=R('<span class="text-[10px] px-1.5 py-0.5 rounded bg-zinc-800 text-zinc-300"> </span>'),tu=R('<span class="text-[10px] px-1.5 py-0.5 rounded bg-amber-900/50 text-amber-300"> </span>'),nu=R('<span class="text-[10px] text-amber-400"><span class="inline-block w-3 h-3 bg-amber-500/80 text-white text-[7px] text-center rounded-sm mr-0.5">!</span>= known</span>'),ru=R("<div><!></div>"),iu=R('<div><div class="flex items-center justify-between text-xs text-zinc-400"><div class="flex items-center gap-3"><span>Your Hand</span> <!> <!> <!></div> <span class="text-zinc-500"> </span></div> <div class="mt-2 flex flex-wrap gap-2"><!> <!></div></div>'),au=R('<button class="rounded-md border border-zinc-700 bg-zinc-950 px-3 py-2 text-xs hover:bg-zinc-900"> </button>'),su=R('<div class="mt-4 flex flex-wrap gap-2"></div>'),ou=R('<!> <!> <div class="mt-4 flex flex-col sm:flex-row sm:items-center gap-4"><div class="flex-1 rounded-lg border border-zinc-800 bg-zinc-950/30 p-4"><div class="flex items-center justify-between text-xs text-zinc-400"><span>Table</span> <div class="flex items-center gap-2"><span class="px-1.5 py-0.5 rounded bg-zinc-800 text-zinc-300"> </span> <span class="text-zinc-500"> </span></div></div> <div class="mt-3 flex flex-wrap gap-3"><!> <!></div></div> <!></div> <!> <!> <!>',1),lu=R('<div class="flex flex-col items-center justify-center py-8"><div class="w-full max-w-sm space-y-4 mb-6"><label class="block"><span class="text-sm font-medium text-zinc-300">Deck Size</span> <select class="mt-1 w-full rounded-md border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm"><option>32 cards (7-Ace)</option><option>36 cards (6-Ace)</option><option>40 cards (5-Ace)</option><option>44 cards (4-Ace)</option><option>48 cards (3-Ace)</option><option>52 cards (2-Ace)</option></select></label> <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" class="h-4 w-4 rounded border-zinc-700 bg-zinc-950 text-indigo-600"/> <div><span class="text-sm font-medium text-zinc-300">Trump Reflecting</span> <p class="text-xs text-zinc-500">Show trump of same rank to redirect attack</p></div></label> <label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" class="h-4 w-4 rounded border-zinc-700 bg-zinc-950 text-indigo-600"/> <div><span class="text-sm font-medium text-zinc-300">Reflecting</span> <p class="text-xs text-zinc-500">Play card of same rank to redirect attack</p></div></label></div> <button class="rounded-md bg-indigo-600 px-8 py-3 text-lg font-medium hover:bg-indigo-500">Start Game</button></div>'),cu=R('<div class="text-sm text-zinc-400">Loading…</div>'),uu=R("<button> </button>"),fu=R('<div class="mb-3 flex flex-wrap gap-4 text-xs text-zinc-400"><div class="flex flex-col gap-1"><label class="flex items-center gap-1"><span class="w-24">Determinizations:</span><input class="w-20 rounded border border-zinc-700 bg-zinc-950 px-1.5 py-0.5 text-xs" type="number" min="1"/></label> <label class="flex items-center gap-1"><span class="w-24">Rollouts:</span><input class="w-20 rounded border border-zinc-700 bg-zinc-950 px-1.5 py-0.5 text-xs" type="number" min="100"/></label></div> <div class="flex flex-col gap-1 text-zinc-500"><span>% = win rate</span><span># = simulations</span><span class="text-zinc-600 italic text-[10px]">Tip: play with these numbers</span></div></div>'),du=R('<div class="text-sm text-amber-400">Please specify which cards you drew before continuing.</div>'),vu=R('<div class="flex flex-col items-center gap-0.5"><div> </div> <div class="w-10 h-1 bg-zinc-700 rounded-full overflow-hidden"><div></div></div> <div class="text-[8px] text-zinc-500"> </div></div>'),_u=R('<button><div class="text-[10px] text-zinc-400"> </div> <!> <!></button>'),pu=R('<div class="flex flex-wrap gap-2 mb-3"></div>'),hu=R('<div> </div> <div class="text-[8px] text-zinc-500"> </div>',1),mu=R('<button><div class="text-xs font-medium"> </div> <!></button>'),gu=R('<div class="flex gap-2 mb-3"></div>'),bu=R("<!> <!>",1),xu=R('<button class="rounded-md border-2 px-4 py-2.5 text-sm font-semibold shadow-lg border-indigo-500 bg-indigo-950 text-indigo-200 hover:bg-indigo-900"> </button>'),yu=R('<div class="flex flex-wrap gap-2 mb-4"></div>'),wu=R('<div class="mb-3"><div class="text-xs text-zinc-400 mb-1.5"> </div> <div class="flex flex-wrap gap-1.5"></div></div>'),ku=R("<option> </option>"),Su=R("<option> </option>"),zu=R('<!> <!> <details class="text-xs"><summary class="text-zinc-500 cursor-pointer hover:text-zinc-300 mb-2">Manual card input</summary> <div class="space-y-2 mt-2 p-2 rounded border border-zinc-800 bg-zinc-950/50"><div class="grid grid-cols-2 gap-2"><label class="grid gap-1"><span class="text-zinc-400">Suit</span><select class="rounded-md border border-zinc-700 bg-zinc-950 px-2 py-1.5"></select></label> <label class="grid gap-1"><span class="text-zinc-400">Rank</span><select class="rounded-md border border-zinc-700 bg-zinc-950 px-2 py-1.5"></select></label></div> <button class="w-full rounded-md border border-zinc-700 bg-zinc-950 px-2 py-1.5 hover:bg-zinc-900">Apply</button></div></details>',1),Tu=R('<div class="rounded-lg border border-indigo-700/50 bg-indigo-950/30 p-4"><div class="flex items-center gap-3"><div class="animate-spin rounded-full h-5 w-5 border-2 border-indigo-500 border-t-transparent"></div> <div><div class="text-sm font-medium text-indigo-300"> </div> <div class="text-xs text-zinc-500"> </div></div></div></div>'),Au=R('<div class="text-xs text-zinc-500">Waiting...</div>'),Eu=R('<div class="flex items-center gap-2 mb-3"><div class="text-sm font-medium"> <span> </span></div> <div class="flex-1"></div> <!></div> <!> <!>',1),Pu=R('<div class="min-h-screen"><div class="mx-auto max-w-7xl px-4 py-4"><div class="flex items-center justify-between gap-4"><h1 class="text-lg font-semibold tracking-tight text-zinc-300">Durak</h1> <div class="flex items-center gap-2"><span class="text-[10px] text-zinc-600 italic"> </span> <label class="flex items-center gap-2 cursor-pointer"><span class="text-xs text-zinc-400">Computer Shuffle</span> <button role="switch" aria-label="Toggle computer shuffle"><span></span></button></label></div> <label class="flex items-center gap-1.5 text-xs text-zinc-400"><span>Threads:</span> <input type="number" min="1" max="16" class="w-8 rounded border border-zinc-700 bg-zinc-950 px-1 py-1 text-xs text-center [appearance:textfield] [&amp;::-webkit-outer-spin-button]:appearance-none [&amp;::-webkit-inner-spin-button]:appearance-none"/></label></div> <!> <div class="mt-3 flex flex-col gap-2 text-sm"><div class="flex items-center gap-2 flex-wrap"><span class="text-zinc-500 text-xs">Players:</span> <!> <!> <div class="flex items-center gap-1.5 ml-auto"><button class="rounded border border-zinc-700 bg-zinc-900 px-2 py-1 text-xs hover:bg-zinc-800 disabled:opacity-50"> </button> <button class="rounded border border-zinc-600 bg-zinc-800 px-2 py-1 text-xs text-zinc-300 hover:bg-zinc-700">Reset</button></div></div> <!></div> <!> <div class="mt-6 grid gap-4 lg:grid-cols-3"><div class="lg:col-span-2 rounded-xl border border-zinc-800 bg-zinc-900/40 p-5"><!></div> <div class="rounded-xl border border-zinc-800 bg-zinc-900/40 p-5"><!></div></div></div></div>');function Ru(e,n){xi(n,!1);const r=he(),i=he(),a=he(),o=he(),c=he(),v=he(),_=he(),x=he(),w=["Clubs","Diamonds","Hearts","Spades"],P=["Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King","Ace"],S=P,E=["Hearts","Diamonds"],re=["Clubs","Spades"];function we(s){if(!s)return["Hearts","Clubs","Diamonds","Spades"];const u=E.includes(s),h=u?E:re,m=u?re:E,y=h.find(T=>T!==s);return[s,m[0],y,m[1]]}const C=50,$="durak_manual_game",te="durak_computer_game";let l=he(nc()),f=he(null),ke=he([]),_e=he([]),Le=he(!1),le=he(""),qe=[],et=0,tn=[],ot=he(null),Yn=!1,Ur=0,Wn=null,Ri=null;const ds=500,vs=5e4;let Tn=he(!1),An=he(null);const _s=500;let hr=he(!1),Ge=he(!1),De=he("Spades"),wt=he("Six"),nn=he("P0"),ie=he([]),Ye=he({}),Pt=he(!1),mr=he(null),Kn=he(""),gr=he("Clubs"),br=he("Six");const Ne=s=>`${s?.suit||"?"}:${s?.rank||"?"}`,ht=s=>JSON.stringify(s),Ci=s=>new Promise(u=>setTimeout(u,s)),He=s=>{if(!s)return null;if(s.phase==="Defending")return s.defender;if(s.attackers?.length>0){const u=s.current_attacker_idx??0;return s.attackers[u%s.attackers.length]}return s.attacker},En=s=>s==="P0"?"You":t(a)[s]||s;function ps(s,u){if(!s)return!1;const h=parseInt(u.slice(1)),m=s.hands?.[h]?.length||0,y=s.stock?.length===0;return m>0||!y}function Oi(s,u){if(!s||!ps(s,u))return null;if(s.defender===u)return"Defender";if(s.attackers?.length>0){const h=s.attackers.indexOf(u);if(h===0)return"Main Attacker";if(h>0){const m=h+1;return`${m}${m===1?"st":m===2?"nd":m===3?"rd":"th"} Attacker`}}else if(s.attacker===u)return"Main Attacker";return null}function Mi(s,u){return He(s)===u}function je(s){return!s||s.type==="unknown"?null:s.type==="public"||s.type==="private"?{suit:s.suit,rank:s.rank}:s.Public?s.Public:s.Private?s.Private:s.suit&&s.rank?s:null}function Ni(s){return s?s.type==="public"||!!s.Public:!1}function hs(s){return!s||!Array.isArray(s)?[]:s.filter(Ni).map(je).filter(u=>u!==null)}function ms(s){return!s||!Array.isArray(s)?0:s.filter(u=>!Ni(u)).length}function Pn(s){if(!s)return!1;try{return xa(s)!=null}catch(u){return console.error("isGameOver error:",u),!1}}function gs(s){if(!s)return null;try{return xa(s)??null}catch{return null}}function dn(s){if(!s)return!1;try{return ic(s)}catch{return!1}}function Vn(s){const u=t(f)?.trump||t(De),h=we(u);return[...s].sort((m,y)=>{const T=h.indexOf(m.suit)-h.indexOf(y.suit);return T!==0?T:S.indexOf(y.rank)-S.indexOf(m.rank)})}function kt(s){return s?s.type==="throw"?s.card?je(s.card):null:["attack","defend","reflect","reflect_trump"].includes(s.type)?je(s.card):null:null}function Br(s){const u={attack:`Attack ${vt(je(s?.card))}`,defend:`Defend ${vt(je(s?.card))}`,pass_attack:"Pass / end attack",take:"Take",reflect:`Reflect ${vt(je(s?.card))}`,reflect_trump:`Show Trump ${vt(je(s?.card))}`};return s?.type==="throw"?s.card?`Throw ${vt(je(s.card))}`:"Pass":u[s?.type]||JSON.stringify(s)}function bs(s){return s?(s.hands?.[0]||[]).map(je).filter(u=>u!==null):[]}const Ii=s=>Vn(bs(s));function mt(s){return s?(s.hands?.[0]||[]).filter(h=>h?.type==="unknown"||h?.Unknown!==void 0).length:0}function qr(){return Vn(w.flatMap(s=>t(o).map(u=>({suit:s,rank:u}))))}function Di(s=[]){const u=new Set(s.map(Ne));return qr().filter(h=>!u.has(Ne(h)))}function xs(s){if(!s)return[];const u=[];if(s.stock?.length>0){const h=je(s.stock[0]);h&&u.push(h)}for(const h of s.hands||[])for(const m of h){const y=je(m);y&&u.push(y)}for(const h of s.table||[]){if(h.attack){const m=je(h.attack);m&&u.push(m)}if(h.defense){const m=je(h.defense);m&&u.push(m)}}for(const h of s.discard||[]){const m=je(h);m&&u.push(m)}return u}function ys(s){if(!t(f))return;const u=t(f).hands?.[0]||[],h=u.findIndex(T=>T?.type==="unknown"||T?.Unknown!==void 0);if(h===-1)return;const m=[...u];m[h]={type:"private",suit:s.suit,rank:s.rank};const y=[...t(f).hands];y[0]=m,g(f,{...t(f),hands:y}),Rn(),vn(),mt(t(f))===0&&He(t(f))===t(r)&&_n()}function ws(s,u,h){const m=s.filter(y=>y.suit===u&&Ne(y)!==Ne(h));return m.length?m.sort((y,T)=>S.indexOf(y.rank)-S.indexOf(T.rank))[0]:null}function ks(s,u,h,m){const y=new Set([...s.filter(T=>T.suit===u).map(Ne),Ne({suit:u,rank:h}),...Object.values(m).filter(T=>T&&T!=="None").map(T=>Ne({suit:u,rank:T}))]);return qr().filter(T=>T.suit===u&&!y.has(Ne(T))).sort((T,B)=>S.indexOf(T.rank)-S.indexOf(B.rank))}function $i(s,u){const h=Math.floor(s/u),m=s-h*u;return Array.from({length:u},(y,T)=>h+(T<m?1:0))}function Ss(s){s.focus(),s.select()}function vn(){try{const s=t(l).computerShuffle?te:$;if(t(l).computerShuffle){if(!t(f))return;localStorage.setItem(s,JSON.stringify({mode:"computer",state:t(f),stateHistory:t(_e),me:t(r)}))}else localStorage.setItem(s,JSON.stringify({mode:"manual",state:t(f),stateHistory:t(_e),opponentTrumps:t(Ye),manualTrumpSuit:t(De),manualTrumpRank:t(wt),manualStarts:t(nn),manualHand:t(ie),manualGameStarted:t(Ge),trumpCardSelected:t(Pt),me:t(r)}))}catch(s){console.warn("Failed to save game:",s)}}function Fi(s){const u=s?te:$;try{const h=localStorage.getItem(u);if(!h)return!1;const m=JSON.parse(h);if(s){if(!m.state?.hands||!Array.isArray(m.state.hands))return localStorage.removeItem(u),!1;try{ti(m.state)}catch{return localStorage.removeItem(u),!1}g(f,m.state),g(_e,m.stateHistory||[]),Rn(),Vr()}else if(g(Ye,m.opponentTrumps||{}),g(De,m.manualTrumpSuit||"Spades"),g(wt,m.manualTrumpRank||"Six"),g(nn,typeof m.manualStarts=="string"?m.manualStarts:m.manualStarts?"P0":"P1"),g(ie,m.manualHand||[]),g(Pt,m.trumpCardSelected||!1),m.state?.hands&&Array.isArray(m.state.hands)){if(!(m.state.hands[0]||[]).some(T=>T?.type==="unknown"||T?.Unknown!==void 0))try{ti(m.state)}catch{return g(Ge,!1),g(f,null),!0}if(g(f,m.state),dn(t(f)))try{g(f,ba(t(f)))}catch{}g(_e,m.stateHistory||[]),g(Ge,m.manualGameStarted??!0),Rn(),mt(t(f))===0&&He(t(f))===t(r)&&_n()}else g(Ge,!1),g(f,null);return!0}catch(h){console.warn("Failed to load game:",h)}return!1}function zs(){localStorage.removeItem(t(l).computerShuffle?te:$),g(_e,[]),g(le,"")}function Gr(){qe.forEach(s=>{try{s.terminate()}catch{}}),qe=[]}function Yr(){return Math.max(1,t(l).numThreads||4)}function Li(){Gr(),Ur=0;const s=Yr();for(let u=0;u<s;u++)try{const h=new Worker(new URL("/durak-online/assets/solver.worker-BCgVZYn4.js",import.meta.url),{type:"module"});h.onmessage=m=>{const y=m.data;if(y?.type==="error"){if(y.id&&y.id!==et)return;g(le,y.message?.includes("memory")?"Out of memory. Try refreshing or reducing threads.":`[${y.context}] ${y.message}`),Wr()}else if(y?.type==="result"){if(y.id!==et)return;tn=[...tn,{idx:u,elapsedMs:y.elapsedMs,result:y.result}],Ts(),Wr()}},h.onerror=m=>{g(le,String(m?.message||m).includes("memory")?"Out of memory. Try refreshing or reducing threads.":String(m?.message||m)),Wr()},qe.push(h)}catch(h){g(le,`Failed to create worker: ${h?.message||h}`);break}}function Wr(){++Ur>=qe.length&&(Yn=!1)}function Ts(){if(!tn.length){g(ot,null);return}const s=new Map;t(ke).forEach(y=>s.set(ht(y),{action:y,visits:0,weightedScore:0}));let u=0,h=0;for(const y of tn){const T=y.result;u+=T.determinizations||0,h+=T.total_visits||0;for(const B of T.actions||[]){const ae=s.get(ht(B.action))||{action:B.action,visits:0,weightedScore:0};ae.visits+=B.visits||0,ae.weightedScore+=(B.visits||0)*(B.score||0),s.set(ht(B.action),ae)}}const m=[...s.values()].map(y=>{const T=y.visits>0?y.weightedScore/y.visits:null,B=T!==null?T*2-1:null;return{...y,score:T,mean_score:B,wins:y.visits,losses:0,draws:0}}).sort((y,T)=>y.mean_score===null&&T.mean_score===null?0:y.mean_score===null?1:T.mean_score===null?-1:T.mean_score-y.mean_score);g(ot,{determinizations:u,total_visits:h,mean_score:m.find(y=>y.mean_score!==null)?.mean_score??0,actions:m})}function Kr(){et++,tn=[],g(ot,null),Yn=!1,Jn()}function Jn(){Wn&&(clearInterval(Wn),Wn=null)}function As(){g(l,{...t(l),showHints:!t(l).showHints}),Je(t(l)),t(l).showHints&&t(f)&&He(t(f))===t(r)&&!Pn(t(f))?_n():(Jn(),et++,Yn=!1,tn=[],g(ot,null))}function _n(){if(!t(l).showHints||!t(Le)||!t(f)||t(l).computerShuffle&&He(t(f))!==t(r)||mt(t(f))>0)return;if(qe.length!==Yr()&&Li(),!qe.length){g(le,"No workers available");return}g(le,""),Yn=!0,Ur=0,et++;const s=$i(t(l).hintDeterminizations,qe.length);for(let u=0;u<qe.length;u++)s[u]!==0&&qe[u].postMessage({type:"solve",id:et,req:{state:t(f),determinizations:s[u],rollouts_per_determinization:t(l).hintRollouts,max_depth:500}});Wn||(Ri=JSON.stringify({state:t(f),me:t(r)}),Wn=setInterval(()=>{if(JSON.stringify({state:t(f),me:t(r)})!==Ri){Jn();return}!Yn&&t(f)&&He(t(f))===t(r)&&mt(t(f))===0&&_n()},1e3))}async function Es(){if(!t(Le)||!t(f)||!qe.length)return null;const s=t(l).mctsThinkingTimeMs||2e3,u=performance.now();let h=t(l).mctsDeterminizations||20,m=5e3;const y=new Map;for(;performance.now()-u<s;){const ae=performance.now(),be=await Ps(h,m);for(const $e of be){const tt=ht($e.action),ge=y.get(tt)||{action:$e.action,wins:0,losses:0,draws:0};ge.wins+=$e.wins||0,ge.losses+=$e.losses||0,ge.draws+=$e.draws||0,y.set(tt,ge)}const xe=s-(performance.now()-u);if(xe<200)break;const We=performance.now()-ae;if(We<xe/2){const $e=Math.min(2,xe/We/2);h=Math.min(ds,Math.ceil(h*$e)),m=Math.min(vs,Math.ceil(m*Math.sqrt($e)))}}let T=null,B=-1/0;for(const ae of y.values()){const be=ae.wins+ae.losses+ae.draws;if(be>0){const xe=(ae.wins-ae.losses)/be;xe>B&&(B=xe,T=ae.action)}}return T}function Ps(s,u){return new Promise(h=>{const m=$i(s,qe.length),y=[];let T=0;const B=++et,ae=be=>{be.data.id!==B||be.data.type!=="result"||(y.push(...be.data.result?.actions||[]),++T>=m.filter(xe=>xe>0).length&&h(y))};qe.forEach((be,xe)=>{be.addEventListener("message",ae),m[xe]>0&&be.postMessage({type:"solve",id:B,req:{state:t(f),determinizations:m[xe],rollouts_per_determinization:u,max_depth:500}})}),setTimeout(()=>{qe.forEach(be=>be.removeEventListener("message",ae)),h(y)},1e4)})}function Rn(){if(!t(Le)||!t(f)){g(ke,[]);return}if(!t(l).computerShuffle&&mt(t(f))>0&&He(t(f))===t(r)){g(ke,[]);return}g(ke,ti(t(f)))}function Rs(s){t(l).computerShuffle!==s&&(vn(),g(l,{...t(l),computerShuffle:s}),Je(t(l)),Kr(),g(_e,[]),g(le,""),Fi(s)||(g(f,null),g(Ge,!1),g(ke,[])),vn())}function Hi(){if(t(Le)){g(le,""),Kr(),g(Ge,!1),g(_e,[]),g(Tn,!1),g(An,null);try{if(t(l).computerShuffle){const s=ga(t(l)),u=BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER));g(f,sc({seed:u},s)),Vr()}else{if(t(ie).length!==6){g(le,"You must add exactly 6 cards to your hand");return}const s=ga(t(l)),u=Object.entries(t(Ye)).filter(([y,T])=>y!==t(r)&&T&&T!=="None").map(([y,T])=>[y,T]),h=y=>({type:"public",suit:y.suit,rank:y.rank}),m=parseInt(t(nn).replace("P",""),10)||0;g(f,oc({trump_card:h(t(c)),player_hand:t(ie).map(h),starting_player:m,opponent_trumps:u},s)),g(Ge,!0),He(t(f))===t(r)&&_n()}Rn(),vn()}catch(s){g(le,String(s?.message||s)),g(f,null)}}}async function Vr(){if(!t(f)||Pn(t(f)))return;const s=He(t(f));if(!s)return;if(!t(l).computerShuffle){s===t(r)&&_n();return}const u=t(l).playerTypes[s]||H.Random;if(u===H.Human){if(t(ke).length===1){if(await Ci(200),!t(f)||Pn(t(f))||He(t(f))!==s)return;Nt(t(ke)[0],!0);return}_n();return}g(Tn,!0),g(An,s);try{if(u===H.MCTS){qe.length!==Yr()&&Li();const h=await Es()||ni(t(f));h&&Nt(h)}else{if(await Ci(_s),!t(f)||Pn(t(f))||He(t(f))!==s)return;const h=ni(t(f));h&&Nt(h)}}catch(h){g(le,`AI error: ${h?.message||h}`);const m=ni(t(f));m&&Nt(m)}finally{g(Tn,!1),g(An,null)}}function Nt(s,u=!1){if(!(!t(Le)||!t(f))){g(le,"");try{if(u&&g(_e,[...t(_e).slice(-C+1),JSON.parse(JSON.stringify(t(f)))]),g(f,ac(t(f),s)),!t(l).computerShuffle&&dn(t(f)))try{g(f,ba(t(f)))}catch{}Rn(),vn(),tn=[],g(ot,null),Jn(),setTimeout(Vr,0)}catch(h){g(le,String(h?.message||h)),t(_e).length&&(g(f,t(_e).pop()),g(_e,[...t(_e)]))}}}function ji(s){He(t(f))===t(r)&&(mt(t(f))>0||(tn=[],g(ot,null),Nt(s,!0)))}function Cs(s){const u=t(ke).find(h=>kt(h)?.suit===s.suit&&kt(h)?.rank===s.rank);u&&ji(u)}function Os(){if(!t(_e).length){g(le,"No moves to undo");return}g(le,""),g(f,t(_e).pop()),g(_e,[...t(_e)]),Rn(),Kr(),g(Tn,!1),g(An,null),vn()}function Ms(s,u){g(Ye,{...t(Ye),[s]:u})}function Ui(s){g(Ye,{...t(Ye),[s]:"None"})}function Ns(){t(l).numPlayers<6&&(g(l,{...t(l),numPlayers:t(l).numPlayers+1}),Je(t(l)))}function Is(){t(l).numPlayers>2&&(g(l,{...t(l),numPlayers:t(l).numPlayers-1}),Je(t(l)))}function Bi(s,u){g(l,{...t(l),playerNames:{...t(l).playerNames,[s]:u||s}}),Je(t(l)),g(mr,null)}function Ds(){if(!t(f))return;const s={suit:t(gr),rank:t(br)},u=t(ke).find(h=>kt(h)?.suit===s.suit&&kt(h)?.rank===s.rank);if(!u){g(le,`${vt(s)} is not legal right now`);return}Nt(u,!0)}cs(async()=>{try{await pc(),g(Le,!0),Fi(t(l).computerShuffle)}catch(u){g(le,`Failed to init WASM: ${u?.message||u}`)}const s=()=>Gr();return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)}),Bl(()=>{Gr(),Jn()});function $s(s){return He(t(f))===t(r)&&t(ke).some(u=>kt(u)?.suit===s.suit&&kt(u)?.rank===s.rank)}function Fs(s){const u=t(ot)?.actions?.[0];if(!u)return!1;const h=kt(u.action);return h&&h.suit===s.suit&&h.rank===s.rank}function Ls(s,u){return s?.hands?.[0]?.some(h=>h?.type==="public"?Ne({suit:h.suit,rank:h.rank})===Ne(u):h?.Public?Ne(h.Public)===Ne(u):!1)||!1}function Hs(s){const u=s.filter(m=>m.action.type==="throw"?m.action.card!=null:["attack","defend","reflect","reflect_trump"].includes(m.action.type)),h=s.filter(m=>m.action.type==="pass_attack"||m.action.type==="take"||m.action.type==="throw"&&m.action.card==null);return{cardActions:u,otherActions:h}}function js(s){return{attack:s.filter(u=>u.type==="attack"),defend:s.filter(u=>u.type==="defend"),throw:s.filter(u=>u.type==="throw"&&u.card!=null),reflect:s.filter(u=>u.type==="reflect"),reflectTrump:s.filter(u=>u.type==="reflect_trump"),other:s.filter(u=>!kt(u))}}function Us(s){const u=t(f)?.trump||t(De),h=we(u);return[...s].sort((m,y)=>{const T=kt(m),B=kt(y);if(!T||!B)return 0;const ae=h.indexOf(T.suit)-h.indexOf(B.suit);return ae!==0?ae:S.indexOf(B.rank)-S.indexOf(T.rank)})}Ct(()=>t(l),()=>{g(r,tc(t(l)))}),Ct(()=>(t(l),H),()=>{g(i,Object.entries(t(l).playerTypes).some(([s,u])=>parseInt(s.slice(1))<t(l).numPlayers&&u===H.MCTS))}),Ct(()=>t(l),()=>{g(a,t(l).playerNames||{})}),Ct(()=>t(l),()=>{g(o,P.slice(-(t(l).deckSize/4)))}),Ct(()=>(t(o),t(ie),t(wt)),()=>{const s=new Set(t(o));t(ie).some(u=>!s.has(u.rank))&&g(ie,t(ie).filter(u=>s.has(u.rank))),s.has(t(wt))||(g(wt,t(o)[0]),g(Pt,!1))}),Ct(()=>(t(De),t(wt)),()=>{g(c,{suit:t(De),rank:t(wt)})}),Ct(()=>(t(ie),t(De),t(c)),()=>{g(v,ws(t(ie),t(De),t(c)))}),Ct(()=>(t(ie),t(De),t(wt),t(Ye)),()=>{g(_,ks(t(ie),t(De),t(wt),t(Ye)))}),Ct(()=>(t(l),t(r),t(Ye)),()=>{g(x,Array.from({length:t(l).numPlayers},(s,u)=>`P${u}`).filter(s=>s!==t(r)).every(s=>t(Ye)[s]))}),Ct(()=>(t(r),t(v),t(Ye)),()=>{let s=t(r),u=t(v)?S.indexOf(t(v).rank):1/0;for(const[h,m]of Object.entries(t(Ye)))if(m&&m!=="None"){const y=S.indexOf(m);y<u&&(u=y,s=h)}g(nn,s)}),Ct(()=>(t(l),t(Ge),t(Le),t(ie),t(De),t(wt),t(Ye),t(Pt)),()=>{!t(l).computerShuffle&&!t(Ge)&&t(Le)&&(t(ie),t(De),t(wt),t(Ye),t(Pt),vn())}),ul(),ls();var qi=Pu(),Bs=p(qi),Gi=p(Bs),Yi=b(p(Gi),2),Wi=p(Yi),qs=p(Wi),Gs=b(Wi,2),xr=b(p(Gs),2),Ys=p(xr),Ws=b(Yi,2),Ki=b(p(Ws),2),Vi=b(Gi,2);{var Ks=s=>{var u=hc(),h=b(p(u),2),m=p(h);F(()=>U(m,t(le))),k(s,u)};M(Vi,s=>{t(le)&&s(Ks)})}var Ji=b(Vi,2),Qi=p(Ji),Xi=b(p(Qi),2);Ie(Xi,1,()=>(t(l),d(()=>Array(t(l).numPlayers))),Gt,(s,u,h)=>{const m=I(()=>`P${h}`),y=I(()=>(t(l),z(t(m)),z(H),d(()=>t(l).computerShuffle?t(l).playerTypes[t(m)]||(h===0?H.Human:H.Random):h===0?H.Human:H.Real))),T=I(()=>(z(t(y)),z(H),d(()=>t(y)===H.Human)));var B=kc(),ae=p(B);{var be=ge=>{var Se=mc();k(ge,Se)},xe=ge=>{var Se=bt(),Ke=Me(Se);{var nt=K=>{var pe=gc();ir(()=>Ll(pe,()=>t(Kn),Ee=>g(Kn,Ee))),ir(()=>ue("blur",pe,()=>Bi(t(m),t(Kn)))),ir(()=>ue("keydown",pe,Ee=>{Ee.key==="Enter"&&Bi(t(m),t(Kn)),Ee.key==="Escape"&&g(mr,null)})),Rl(pe,Ee=>Ss?.(Ee)),k(K,pe)},fe=K=>{var pe=bc(),Ee=p(pe);F(()=>U(Ee,(t(a),z(t(m)),d(()=>t(a)[t(m)]||t(m))))),ue("click",pe,()=>{g(mr,t(m)),g(Kn,t(a)[t(m)]||t(m))}),k(K,pe)};M(Ke,K=>{t(mr)===t(m)?K(nt):K(fe,!1)},!0)}k(ge,Se)};M(ae,ge=>{h===0&&t(T)?ge(be):ge(xe,!1)})}var We=b(ae,2);{var $e=ge=>{var Se=xc(),Ke=p(Se),nt={},fe=b(Ke),K={},pe;Ar(Se),F(()=>{nt!==(nt=(z(H),d(()=>H.Random)))&&(Ke.value=(Ke.__value=(z(H),d(()=>H.Random)))??""),K!==(K=(z(H),d(()=>H.MCTS)))&&(fe.value=(fe.__value=(z(H),d(()=>H.MCTS)))??""),pe!==(pe=t(y))&&(Se.value=(Se.__value=t(y))??"",ar(Se,t(y)))}),ue("change",Se,Ee=>{g(l,{...t(l),playerTypes:{...t(l).playerTypes,[t(m)]:Ee.target.value}}),Je(t(l))}),k(ge,Se)},tt=ge=>{var Se=bt(),Ke=Me(Se);{var nt=K=>{var pe=yc();k(K,pe)},fe=K=>{var pe=wc(),Ee=p(pe);F(()=>U(Ee,t(y))),k(K,pe)};M(Ke,K=>{t(l),d(()=>t(l).computerShuffle&&h===0)?K(nt):K(fe,!1)},!0)}k(ge,Se)};M(We,ge=>{t(l),d(()=>t(l).computerShuffle&&h>0)?ge($e):ge(tt,!1)})}F(()=>Ce(B,1,`flex items-center gap-0.5 rounded-md border ${t(T)?"border-indigo-600 bg-indigo-950/30":"border-zinc-700 bg-zinc-950"} overflow-hidden`)),k(s,B)});var Zi=b(Xi,2);{var Vs=s=>{var u=Sc(),h=Me(u),m=b(h,2);F(()=>{h.disabled=(t(l),d(()=>t(l).numPlayers<=2)),m.disabled=(t(l),d(()=>t(l).numPlayers>=6))}),ue("click",h,Is),ue("click",m,Ns),k(s,u)};M(Zi,s=>{t(l),t(f),t(Ge),d(()=>t(l).computerShuffle?!t(f):!t(Ge))&&s(Vs)})}var Js=b(Zi,2),yr=p(Js),Qs=p(yr),Xs=b(yr,2),Zs=b(Qi,2);{var eo=s=>{var u=zc(),h=p(u),m=b(p(h),2),y=b(h,2),T=b(p(y),2);F(()=>{Qn(m,(t(l),d(()=>t(l).mctsThinkingTimeMs))),Qn(T,(t(l),d(()=>t(l).mctsDeterminizations)))}),ue("change",m,B=>{g(l,{...t(l),mctsThinkingTimeMs:parseInt(B.target.value)||2e3}),Je(t(l))}),ue("change",T,B=>{g(l,{...t(l),mctsDeterminizations:parseInt(B.target.value)||20}),Je(t(l))}),k(s,u)};M(Zs,s=>{t(l),t(i),d(()=>t(l).computerShuffle&&t(i))&&s(eo)})}var ea=b(Ji,2);{var to=s=>{var u=Fc(),h=p(u),m=b(p(h),2),y=p(m),T=b(p(y),2),B=p(T);B.value=B.__value=32;var ae=b(B);ae.value=ae.__value=36;var be=b(ae);be.value=be.__value=40;var xe=b(be);xe.value=xe.__value=44;var We=b(xe);We.value=We.__value=48;var $e=b(We);$e.value=$e.__value=52;var tt;Ar(T);var ge=b(y,2),Se=p(ge),Ke=b(ge,2),nt=p(Ke),fe=b(h,2),K=p(fe),pe=p(K),Ee=b(pe,4);{var It=O=>{var N=Tc();ue("click",N,()=>g(Pt,!1)),k(O,N)};M(Ee,O=>{t(Pt)&&O(It)})}var Ue=b(K,2);{var St=O=>{var N=Ac(),j=b(Me(N),2);Ie(j,5,()=>d(qr),D=>Ne(D),(D,A)=>{Ve(D,{get card(){return t(A)},size:"sm",selectable:!0,$$events:{click:()=>{g(De,t(A).suit),g(wt,t(A).rank),g(Pt,!0)}}})}),k(O,N)},rt=O=>{var N=Ec(),j=p(N);Ve(j,{get card(){return t(c)},size:"md"});var D=b(j,2),A=p(D),X=p(A),W=b(A,2),se=b(p(W)),de=p(se);F((Pe,Fe)=>{U(X,Pe),U(de,`${Fe??""} ${t(De)??""}`)},[()=>(z(vt),t(c),d(()=>vt(t(c)))),()=>(z(Yt),t(De),d(()=>Yt(t(De))))]),k(O,N)};M(Ue,O=>{t(Pt)?O(rt,!1):O(St)})}var jt=b(fe,2);{var Q=O=>{var N=Cc(),j=p(N),D=p(j),A=b(D,4),X=p(A),W=b(j,2),se=p(W);Ie(se,1,()=>(t(ie),d(()=>Vn(t(ie)))),G=>Ne(G),(G,ce)=>{Ve(G,{get card(){return t(ce)},size:"sm",selectable:!0,$$events:{click:()=>g(ie,t(ie).filter(oe=>Ne(oe)!==Ne(t(ce))))}})});var de=b(se,2);{var Pe=G=>{var ce=Pc();k(G,ce)};M(de,G=>{t(ie),d(()=>!t(ie).length)&&G(Pe)})}var Fe=b(W,2);{var dt=G=>{var ce=Rc(),oe=p(ce),V=p(oe),Z=b(oe,2);Ie(Z,5,()=>(t(ie),t(c),d(()=>Di([...t(ie),t(c)]))),ze=>Ne(ze),(ze,ye)=>{Ve(ze,{get card(){return t(ye)},size:"sm",selectable:!0,$$events:{click:()=>g(ie,[...t(ie),t(ye)])}})}),F(()=>U(V,`Click to add (${t(ie),d(()=>6-t(ie).length)??""} more):`)),k(G,ce)};M(Fe,G=>{t(ie),d(()=>t(ie).length<6)&&G(dt)})}F(()=>{Ce(D,1,`flex items-center justify-center w-6 h-6 rounded-full ${t(ie),d(()=>t(ie).length===6?"bg-green-600":"bg-indigo-600")??""} text-xs font-bold`),U(X,`${t(ie),d(()=>t(ie).length)??""}/6`)}),k(O,N)};M(jt,O=>{t(Pt)&&O(Q)})}var Y=b(jt,2);{var q=O=>{var N=$c(),j=Me(N),D=p(j),A=p(D),X=b(A,2),W=b(p(X)),se=p(W),de=b(D,2),Pe=p(de);{var Fe=V=>{var Z=Oc(),ze=b(Me(Z)),ye=p(ze);F(lt=>U(ye,lt),[()=>(z(vt),t(v),d(()=>vt(t(v))))]),k(V,Z)},dt=V=>{var Z=Xr("You have no trumps");k(V,Z)};M(Pe,V=>{t(v)?V(Fe):V(dt,!1)})}var G=b(de,2);Ie(G,5,()=>(t(l),d(()=>Array(t(l).numPlayers))),Gt,(V,Z,ze)=>{const ye=I(()=>`P${ze}`);var lt=bt(),L=Me(lt);{var J=Te=>{const it=I(()=>(t(Ye),z(t(ye)),d(()=>t(Ye)[t(ye)])));var ct=Ic(),gt=p(ct),Ut=p(gt),pn=b(gt,2),hn=p(pn),Jr=b(hn,2);{var wr=Dt=>{var Bt=Mc(),Cn=p(Bt);{let Re=I(()=>({suit:t(De),rank:t(it)}));Ve(Cn,{get card(){return t(Re)},size:"sm"})}var ee=b(Cn,2);ue("click",ee,()=>Ui(t(ye))),k(Dt,Bt)},Qr=Dt=>{var Bt=bt(),Cn=Me(Bt);Ie(Cn,1,()=>t(_),ee=>Ne(ee),(ee,Re)=>{var at=Nc(),Rt=p(at);Ve(Rt,{get card(){return t(Re)},size:"sm",selectable:!0}),ue("click",at,()=>Ms(t(ye),t(Re).rank)),k(ee,at)}),k(Dt,Bt)};M(Jr,Dt=>{t(it)&&t(it)!=="None"?Dt(wr):Dt(Qr,!1)})}F((Dt,Bt)=>{U(Ut,`${Dt??""}'s lowest (${Bt??""}):`),Ce(hn,1,`rounded-md border px-3 py-1.5 text-xs font-medium ${t(it)==="None"?"border-amber-500 bg-amber-500/20 text-amber-300":"border-zinc-700 bg-zinc-950 text-zinc-400 hover:bg-zinc-900"}`)},[()=>(z(t(ye)),d(()=>En(t(ye)))),()=>(z(Yt),t(De),d(()=>Yt(t(De))))]),ue("click",hn,()=>Ui(t(ye))),k(Te,ct)};M(L,Te=>{t(ye)!==t(r)&&Te(J)})}k(V,lt)});var ce=b(j,2);{var oe=V=>{var Z=Dc(),ze=p(Z),ye=p(ze),lt=p(ye),L=b(ze,2);F(J=>{Ce(ye,1,`text-sm font-medium ${t(nn)===t(r)?"text-indigo-400":"text-zinc-400"}`),U(lt,J)},[()=>(t(nn),t(r),d(()=>t(nn)===t(r)?"You start!":`${En(t(nn))} starts`))]),ue("click",L,Hi),k(V,Z)};M(ce,V=>{t(x)&&V(oe)})}F(V=>{Ce(A,1,`flex items-center justify-center w-6 h-6 rounded-full ${t(x)?"bg-green-600":"bg-indigo-600"} text-xs font-bold`),U(se,`(${V??""})`)},[()=>(z(Yt),t(De),d(()=>Yt(t(De))))]),k(O,N)};M(Y,O=>{t(ie),d(()=>t(ie).length===6)&&O(q)})}F(()=>{tt!==(tt=(t(l),d(()=>t(l).deckSize)))&&(T.value=(T.__value=(t(l),d(()=>t(l).deckSize)))??"",ar(T,(t(l),d(()=>t(l).deckSize)))),zr(Se,(t(l),d(()=>t(l).trumpReflecting))),zr(nt,(t(l),d(()=>t(l).reflecting))),Ce(pe,1,`flex items-center justify-center w-6 h-6 rounded-full ${t(Pt)?"bg-green-600":"bg-indigo-600"} text-xs font-bold`)}),ue("change",T,O=>{g(l,{...t(l),deckSize:parseInt(O.target.value)}),Je(t(l))}),ue("change",Se,O=>{g(l,{...t(l),trumpReflecting:O.target.checked}),Je(t(l))}),ue("change",nt,O=>{g(l,{...t(l),reflecting:O.target.checked}),Je(t(l))}),k(s,u)};M(ea,s=>{t(l),t(Ge),d(()=>!t(l).computerShuffle&&!t(Ge))&&s(to)})}var no=b(ea,2),ta=p(no),ro=p(ta);{var io=s=>{const u=I(()=>(t(f),d(()=>gs(t(f)))));var h=ou(),m=Me(h);{var y=Q=>{const Y=I(()=>t(u)===t(r));var q=Lc(),O=p(q),N=p(O);{var j=A=>{var X=Xr("You're the Durak!");k(A,X)},D=A=>{var X=Xr();F(W=>U(X,`${W??""} is the Durak!`),[()=>(z(t(u)),d(()=>En(t(u))))]),k(A,X)};M(N,A=>{t(Y)?A(j):A(D,!1)})}F(()=>{Ce(q,1,`mb-4 p-4 rounded-lg border-2 ${t(Y)?"border-zinc-500 bg-zinc-950/40":"border-indigo-500 bg-indigo-950/40"}`),Ce(O,1,`text-lg font-bold ${t(Y)?"text-zinc-300":"text-indigo-400"}`)}),k(Q,q)};M(m,Q=>{t(u)&&Q(y)})}var T=b(m,2);Ie(T,1,()=>(t(f),t(l),d(()=>Array(t(f).hands?.length||t(l).numPlayers))),Gt,(Q,Y,q)=>{const O=I(()=>`P${q}`);var N=bt(),j=Me(N);{var D=A=>{const X=I(()=>(t(f),d(()=>t(f).hands?.[q]||[]))),W=I(()=>(z(t(X)),d(()=>hs(t(X))))),se=I(()=>(z(t(X)),d(()=>t(X).map(je).filter(ee=>ee!==null)))),de=I(()=>(z(t(X)),d(()=>ms(t(X))))),Pe=I(()=>(z(t(X)),d(()=>t(X).length))),Fe=I(()=>(t(l),z(t(O)),z(H),d(()=>t(l).computerShuffle?t(l).playerTypes[t(O)]:H.Real))),dt=I(()=>(t(f),z(t(O)),d(()=>Oi(t(f),t(O))))),G=I(()=>(t(f),z(t(O)),d(()=>Mi(t(f),t(O)))));var ce=Yc(),oe=p(ce),V=p(oe),Z=p(V),ze=p(Z),ye=b(Z,2);{var lt=ee=>{var Re=Hc(),at=p(Re);F(()=>{Ce(Re,1,`text-[10px] px-1.5 py-0.5 rounded ${z(t(Fe)),z(H),d(()=>t(Fe)===H.MCTS?"bg-indigo-900/50 text-indigo-300":"bg-zinc-800 text-zinc-400")??""}`),U(at,t(Fe))}),k(ee,Re)};M(ye,ee=>{t(l),d(()=>t(l).computerShuffle)&&ee(lt)})}var L=b(ye,2);{var J=ee=>{var Re=jc(),at=p(Re);F(()=>U(at,t(dt))),k(ee,Re)};M(L,ee=>{t(dt)&&ee(J)})}var Te=b(L,2);{var it=ee=>{var Re=Uc(),at=p(Re);F(Rt=>U(at,`(${Rt??""})`),[()=>(t(f),z(t(W)),d(()=>dn(t(f))?"all known":`${t(W).length} known`))]),k(ee,Re)};M(Te,ee=>{z(t(W)),t(f),d(()=>t(W).length>0||dn(t(f)))&&ee(it)})}var ct=b(V,2),gt=p(ct);{var Ut=ee=>{var Re=Bc(),at=p(Re);Hl(at,()=>t(hr),Rt=>g(hr,Rt)),k(ee,Re)};M(gt,ee=>{t(l),d(()=>t(l).computerShuffle)&&ee(Ut)})}var pn=b(gt,2),hn=p(pn),Jr=b(oe,2),wr=p(Jr);{var Qr=ee=>{var Re=bt(),at=Me(Re);Ie(at,3,()=>(z(t(se)),d(()=>Vn(t(se)))),(Rt,qt)=>Ne(Rt)+"-"+qt,(Rt,qt)=>{Ve(Rt,{get card(){return t(qt)},size:"sm"})}),k(ee,Re)},Dt=ee=>{var Re=qc(),at=Me(Re);Ie(at,3,()=>(z(t(W)),d(()=>Vn(t(W)))),(qt,kr)=>Ne(qt)+"-"+kr,(qt,kr)=>{Ve(qt,{get card(){return t(kr)},size:"sm",known:!0})});var Rt=b(at,2);Ie(Rt,1,()=>(z(t(de)),d(()=>Array(t(de)))),Gt,(qt,kr,Cu,Ou)=>{Ve(qt,{faceDown:!0,size:"sm"})}),k(ee,Re)};M(wr,ee=>{t(hr),t(f),t(l),d(()=>(t(hr)||dn(t(f)))&&t(l).computerShuffle)?ee(Qr):ee(Dt,!1)})}var Bt=b(wr,2);{var Cn=ee=>{var Re=Gc();k(ee,Re)};M(Bt,ee=>{t(Pe)||ee(Cn)})}F(ee=>{Ce(ce,1,`mt-5 rounded-lg border ${t(G)?"border-yellow-500/50":"border-zinc-800"} bg-zinc-950/30 p-4`),Ce(Z,1,`text-xs ${t(G)?"text-yellow-300 font-medium":"text-zinc-400"}`),U(ze,ee),U(hn,`${t(Pe)??""} cards`)},[()=>(z(t(O)),d(()=>En(t(O))))]),k(A,ce)};M(j,A=>{t(O)!==t(r)&&A(D)})}k(Q,N)});var B=b(T,2),ae=p(B),be=p(ae),xe=b(p(be),2),We=p(xe),$e=p(We),tt=b(We,2),ge=p(tt),Se=b(be,2),Ke=p(Se);Ie(Ke,1,()=>(t(f),d(()=>t(f).table)),Gt,(Q,Y)=>{var q=Kc(),O=p(q);{let D=I(()=>(t(Y),d(()=>je(t(Y).attack))));Ve(O,{get card(){return t(D)},size:"md"})}var N=b(O,2);{var j=D=>{var A=Wc(),X=p(A);{let W=I(()=>(t(Y),d(()=>je(t(Y).defense))));Ve(X,{get card(){return t(W)},size:"md"})}k(D,A)};M(N,D=>{t(Y),d(()=>t(Y).defense)&&D(j)})}k(Q,q)});var nt=b(Ke,2);{var fe=Q=>{var Y=Vc();k(Q,Y)};M(nt,Q=>{t(f),d(()=>!t(f).table.length)&&Q(fe)})}var K=b(ae,2);{var pe=Q=>{const Y=I(()=>(t(f),d(()=>t(f).stock?.length||0))),q=I(()=>(z(t(Y)),t(f),d(()=>t(Y)>0?je(t(f).stock[0]):null)));var O=Qc(),N=b(p(O),2);{var j=W=>{Ve(W,{get card(){return t(q)},size:"sm"})},D=W=>{var se=Jc(),de=p(se);F(Pe=>U(de,Pe),[()=>(z(Yt),t(f),d(()=>Yt(t(f).trump)))]),k(W,se)};M(N,W=>{t(q)?W(j):W(D,!1)})}var A=b(N,2),X=p(A);F(()=>U(X,t(Y)>0?`${t(Y)} in stock`:"Stock empty")),k(Q,O)};M(K,Q=>{Q(pe)})}var Ee=b(B,2);{var It=Q=>{const Y=I(()=>(t(f),d(()=>mt(t(f))))),q=I(()=>(t(f),d(()=>xs(t(f))))),O=I(()=>(z(t(q)),d(()=>Di(t(q)))));var N=Xc(),j=p(N),D=p(j),A=b(j,2),X=p(A),W=b(A,2);Ie(W,5,()=>t(O),se=>Ne(se),(se,de)=>{Ve(se,{get card(){return t(de)},size:"sm",selectable:!0,$$events:{click:()=>ys(t(de))}})}),F(()=>{U(D,`You drew ${t(Y)??""} card${t(Y)>1?"s":""} from the stock`),U(X,`Select which card${t(Y)>1?"s":""} you drew:`)}),k(Q,N)};M(Ee,Q=>{t(l),t(f),d(()=>!t(l).computerShuffle&&mt(t(f))>0)&&Q(It)})}var Ue=b(Ee,2);{var St=Q=>{const Y=I(()=>(t(l),t(r),z(H),d(()=>t(l).computerShuffle?t(l).playerTypes[t(r)]:H.Real))),q=I(()=>(t(f),d(()=>(t(f)?.hands?.[0]||[]).filter(L=>L?.type==="public"||L?.Public).map(L=>L?.type==="public"?{suit:L.suit,rank:L.rank}:L.Public)))),O=I(()=>(t(f),t(r),d(()=>Oi(t(f),t(r))))),N=I(()=>(t(f),t(r),d(()=>Mi(t(f),t(r))))),j=I(()=>(t(l),t(f),d(()=>!t(l).computerShuffle&&mt(t(f))>0)));var D=iu(),A=p(D),X=p(A),W=p(X),se=b(W,2);{var de=L=>{var J=Zc(),Te=p(J);F(()=>{Ce(J,1,`text-[10px] px-1.5 py-0.5 rounded ${z(t(Y)),z(H),d(()=>t(Y)===H.Human?"bg-indigo-900/50 text-indigo-300":"bg-zinc-800 text-zinc-400")??""}`),U(Te,t(Y))}),k(L,J)};M(se,L=>{t(l),d(()=>t(l).computerShuffle)&&L(de)})}var Pe=b(se,2);{var Fe=L=>{var J=eu(),Te=p(J);F(()=>U(Te,t(O))),k(L,J)};M(Pe,L=>{t(O)&&L(Fe)})}var dt=b(Pe,2);{var G=L=>{var J=tu(),Te=p(J);F(it=>U(Te,`${it??""} unknown`),[()=>(t(f),d(()=>mt(t(f))))]),k(L,J)},ce=L=>{var J=bt(),Te=Me(J);{var it=ct=>{var gt=nu();k(ct,gt)};M(Te,ct=>{t(f),z(t(q)),d(()=>dn(t(f))||t(q).length)&&ct(it)},!0)}k(L,J)};M(dt,L=>{t(j)?L(G):L(ce,!1)})}var oe=b(X,2),V=p(oe),Z=b(A,2),ze=p(Z);Ie(ze,1,()=>(t(f),d(()=>Ii(t(f)))),L=>Ne(L),(L,J)=>{const Te=I(()=>(t(J),z(t(j)),d(()=>$s(t(J))&&!t(j)))),it=I(()=>(t(f),t(J),d(()=>Ls(t(f),t(J))||dn(t(f)))));var ct=ru(),gt=p(ct);{let Ut=I(()=>(t(f),t(r),z(t(Te)),d(()=>He(t(f))===t(r)&&t(Te)&&!Pn(t(f))))),pn=I(()=>(t(f),t(r),z(t(Te)),z(t(j)),d(()=>He(t(f))!==t(r)||!t(Te)||Pn(t(f))||t(j)))),hn=I(()=>(t(J),d(()=>Fs(t(J)))));Ve(gt,{get card(){return t(J)},get selectable(){return t(Ut)},get disabled(){return t(pn)},get selected(){return t(hn)},get revealed(){return t(it)},$$events:{click:()=>Cs(t(J))}})}F(()=>Ce(ct,1,Ol(t(Te)?"":"opacity-40"))),k(L,ct)});var ye=b(ze,2);{var lt=L=>{var J=bt(),Te=Me(J);Ie(Te,1,()=>(t(f),d(()=>Array(mt(t(f))))),Gt,(it,ct)=>{Ve(it,{faceDown:!0,size:"md"})}),k(L,J)};M(ye,L=>{t(j)&&L(lt)})}F((L,J)=>{Ce(D,1,`durak-felt mt-4 rounded-lg border ${t(j)?"border-amber-500/50":t(N)?"border-yellow-500/50":"border-zinc-800"} p-4`),Ce(W,1,t(N)?"text-yellow-300 font-medium":""),U(V,`${L??""}${J??""} cards`)},[()=>(t(f),d(()=>Ii(t(f)).length)),()=>(z(t(j)),t(f),d(()=>t(j)?` + ${mt(t(f))} unknown`:""))]),k(Q,D)};M(Ue,Q=>{Q(St)})}var rt=b(Ue,2);{var jt=Q=>{var Y=su();Ie(Y,5,()=>(t(ke),d(()=>t(ke).filter(q=>!kt(q)))),q=>ht(q),(q,O)=>{var N=au(),j=p(N);F(D=>U(j,D),[()=>(t(O),d(()=>Br(t(O))))]),ue("click",N,()=>ji(t(O))),k(q,N)}),k(Q,Y)};M(rt,Q=>{t(f),t(r),d(()=>He(t(f))===t(r))&&Q(jt)})}F(Q=>{U($e,(t(f),d(()=>t(f).phase))),U(ge,Q)},[()=>(t(f),t(r),d(()=>He(t(f))===t(r)?"Your turn":`${En(He(t(f)))}'s turn`))]),k(s,h)},ao=s=>{var u=bt(),h=Me(u);{var m=T=>{var B=lu(),ae=p(B),be=p(ae),xe=b(p(be),2),We=p(xe);We.value=We.__value=32;var $e=b(We);$e.value=$e.__value=36;var tt=b($e);tt.value=tt.__value=40;var ge=b(tt);ge.value=ge.__value=44;var Se=b(ge);Se.value=Se.__value=48;var Ke=b(Se);Ke.value=Ke.__value=52;var nt;Ar(xe);var fe=b(be,2),K=p(fe),pe=b(fe,2),Ee=p(pe),It=b(ae,2);F(()=>{nt!==(nt=(t(l),d(()=>t(l).deckSize)))&&(xe.value=(xe.__value=(t(l),d(()=>t(l).deckSize)))??"",ar(xe,(t(l),d(()=>t(l).deckSize)))),zr(K,(t(l),d(()=>t(l).trumpReflecting))),zr(Ee,(t(l),d(()=>t(l).reflecting)))}),ue("change",xe,Ue=>{g(l,{...t(l),deckSize:parseInt(Ue.target.value)}),Je(t(l))}),ue("change",K,Ue=>{g(l,{...t(l),trumpReflecting:Ue.target.checked}),Je(t(l))}),ue("change",Ee,Ue=>{g(l,{...t(l),reflecting:Ue.target.checked}),Je(t(l))}),ue("click",It,Hi),k(T,B)},y=T=>{var B=cu();k(T,B)};M(h,T=>{t(l),t(f),d(()=>t(l).computerShuffle&&!t(f))?T(m):T(y,!1)},!0)}k(s,u)};M(ro,s=>{t(f),t(l),t(Ge),d(()=>t(f)&&(t(l).computerShuffle||t(Ge)))?s(io):s(ao,!1)})}var so=b(ta,2),oo=p(so);{var lo=s=>{const u=I(()=>(t(f),d(()=>He(t(f))))),h=I(()=>t(u)===t(r)),m=I(()=>(z(t(h)),z(H),t(l),z(t(u)),d(()=>t(h)?H.Human:t(l).computerShuffle?t(l).playerTypes[t(u)]:H.Real)));var y=Eu(),T=Me(y),B=p(T),ae=p(B),be=b(ae),xe=p(be),We=b(B,4);{var $e=fe=>{var K=uu(),pe=p(K);F(()=>{Ce(K,1,`rounded-md px-3 py-1.5 text-xs font-medium ${t(l),d(()=>t(l).showHints?"bg-indigo-600 hover:bg-indigo-500":"border border-zinc-700 bg-zinc-900 hover:bg-zinc-800")??""}`),U(pe,(t(l),d(()=>t(l).showHints?"Hints On":"Hints Off")))}),ue("click",K,As),k(fe,K)};M(We,fe=>{z(t(h)),t(l),z(t(u)),t(r),d(()=>t(h)||!t(l).computerShuffle&&t(u)===t(r))&&fe($e)})}var tt=b(T,2);{var ge=fe=>{var K=fu(),pe=p(K),Ee=p(pe),It=b(p(Ee)),Ue=b(Ee,2),St=b(p(Ue));F(()=>{Qn(It,(t(l),d(()=>t(l).hintDeterminizations))),Qn(St,(t(l),d(()=>t(l).hintRollouts)))}),ue("change",It,rt=>{g(l,{...t(l),hintDeterminizations:parseInt(rt.target.value)||50}),Je(t(l))}),ue("change",St,rt=>{g(l,{...t(l),hintRollouts:parseInt(rt.target.value)||5e3}),Je(t(l))}),k(fe,K)};M(tt,fe=>{t(l),z(t(h)),d(()=>t(l).showHints&&t(h))&&fe(ge)})}var Se=b(tt,2);{var Ke=fe=>{var K=du();k(fe,K)},nt=fe=>{var K=bt(),pe=Me(K);{var Ee=Ue=>{const St=I(()=>(t(ot),t(ke),d(()=>t(ot)?.actions||t(ke).map(N=>({action:N,mean_score:null}))))),rt=I(()=>{const{cardActions:N,otherActions:j}=(z(t(St)),d(()=>Hs(t(St))));return{cardActions:N,otherActions:j}});var jt=bu(),Q=Me(jt);{var Y=N=>{var j=pu();Ie(j,5,()=>t(rt).cardActions,D=>ht(D.action),(D,A)=>{const X=I(()=>(t(A),d(()=>je(t(A).action.card)))),W=I(()=>(t(ot),t(A),d(()=>t(ot)?.actions?.length&&ht(t(A).action)===ht(t(ot).actions[0].action)&&t(A).score!=null))),se=I(()=>(t(A),d(()=>({attack:"Attack",defend:"Defend",throw:"Throw",reflect:"Reflect",reflect_trump:"Show"})[t(A).action.type]))),de=I(()=>(t(A),d(()=>t(A).score!=null?(t(A).score*100).toFixed(1):null)));var Pe=_u(),Fe=p(Pe),dt=p(Fe),G=b(Fe,2);Ve(G,{get card(){return t(X)},size:"sm"});var ce=b(G,2);{var oe=V=>{var Z=vu(),ze=p(Z),ye=p(ze),lt=b(ze,2),L=p(lt),J=b(lt,2),Te=p(J);F(()=>{Ce(ze,1,`text-[10px] ${t(A),d(()=>t(A).score>.5?"text-green-400":t(A).score<.5?"text-red-400":"text-zinc-400")??""}`),U(ye,`${t(de)??""}%`),Ce(L,1,`h-full ${t(A),d(()=>t(A).score>.5?"bg-green-500":t(A).score<.5?"bg-red-500":"bg-zinc-500")??""}`),Il(L,`width: ${t(de)??""}%`),U(Te,(t(A),d(()=>t(A).visits)))}),k(V,Z)};M(ce,V=>{t(de)!==null&&V(oe)})}F(()=>{Ce(Pe,1,`flex flex-col items-center gap-1 p-1.5 rounded-lg border ${t(W)?"border-indigo-500 bg-indigo-950/40":"border-zinc-700 bg-zinc-900/50"} hover:bg-zinc-800/50`),or(Pe,"title",(z(t(de)),t(A),z(t(se)),d(()=>t(de)!==null?`${t(de)}% from ${t(A).visits}`:t(se)))),U(dt,t(se))}),ue("click",Pe,()=>Nt(t(A).action,!0)),k(D,Pe)}),k(N,j)};M(Q,N=>{z(t(rt).cardActions),d(()=>t(rt).cardActions.length)&&N(Y)})}var q=b(Q,2);{var O=N=>{var j=gu();Ie(j,5,()=>t(rt).otherActions,D=>ht(D.action),(D,A)=>{const X=I(()=>(t(ot),t(A),d(()=>t(ot)?.actions?.length&&ht(t(A).action)===ht(t(ot).actions[0].action)&&t(A).score!=null))),W=I(()=>(t(A),d(()=>t(A).score!=null?(t(A).score*100).toFixed(1):null)));var se=mu(),de=p(se),Pe=p(de),Fe=b(de,2);{var dt=G=>{var ce=hu(),oe=Me(ce),V=p(oe),Z=b(oe,2),ze=p(Z);F(()=>{Ce(oe,1,`text-[10px] ${t(A),d(()=>t(A).score>.5?"text-green-400":t(A).score<.5?"text-red-400":"text-zinc-400")??""}`),U(V,`${t(W)??""}%`),U(ze,(t(A),d(()=>t(A).visits)))}),k(G,ce)};M(Fe,G=>{t(W)!==null&&G(dt)})}F(G=>{Ce(se,1,`flex flex-col items-center gap-1 px-4 py-2 rounded-lg border ${t(X)?"border-indigo-500 bg-indigo-950/40":"border-zinc-700 bg-zinc-900/50"} hover:bg-zinc-800/50`),U(Pe,G)},[()=>(t(A),d(()=>Br(t(A).action)))]),ue("click",se,()=>Nt(t(A).action,!0)),k(D,se)}),k(N,j)};M(q,N=>{z(t(rt).otherActions),d(()=>t(rt).otherActions.length)&&N(O)})}k(Ue,jt)},It=Ue=>{var St=bt(),rt=Me(St);{var jt=Y=>{const q=I(()=>(t(ke),d(()=>js(t(ke)))));var O=zu(),N=Me(O);{var j=G=>{var ce=yu();Ie(ce,5,()=>(z(t(q)),d(()=>t(q).other)),oe=>ht(oe),(oe,V)=>{var Z=xu(),ze=p(Z);F(ye=>U(ze,ye),[()=>(t(V),d(()=>Br(t(V))))]),ue("click",Z,()=>Nt(t(V),!0)),k(oe,Z)}),k(G,ce)};M(N,G=>{z(t(q)),d(()=>t(q).other.length)&&G(j)})}var D=b(N,2);Ie(D,1,()=>(z(t(q)),d(()=>[["Attack",t(q).attack],["Defend",t(q).defend],["Throw",t(q).throw],["Reflect",t(q).reflect],["Show Trump",t(q).reflectTrump]])),Gt,(G,ce)=>{var oe=el(()=>po(t(ce),2));let V=()=>t(oe)[0],Z=()=>t(oe)[1];var ze=bt(),ye=Me(ze);{var lt=L=>{var J=wu(),Te=p(J),it=p(Te),ct=b(Te,2);Ie(ct,5,()=>(Z(),d(()=>Us(Z()))),gt=>ht(gt),(gt,Ut)=>{{let pn=I(()=>(t(Ut),d(()=>kt(t(Ut)))));Ve(gt,{get card(){return t(pn)},size:"sm",selectable:!0,$$events:{click:()=>Nt(t(Ut),!0)}})}}),F(()=>U(it,`${V()??""}:`)),k(L,J)};M(ye,L=>{Z(),d(()=>Z().length)&&L(lt)})}k(G,ze)});var A=b(D,2),X=b(p(A),2),W=p(X),se=p(W),de=b(p(se));F(()=>{t(gr),la(()=>{})}),Ie(de,5,()=>w,Gt,(G,ce)=>{var oe=ku(),V=p(oe),Z={};F(()=>{U(V,t(ce)),Z!==(Z=t(ce))&&(oe.value=(oe.__value=t(ce))??"")}),k(G,oe)});var Pe=b(se,2),Fe=b(p(Pe));F(()=>{t(br),la(()=>{t(o)})}),Ie(Fe,5,()=>t(o),Gt,(G,ce)=>{var oe=Su(),V=p(oe),Z={};F(()=>{U(V,t(ce)),Z!==(Z=t(ce))&&(oe.value=(oe.__value=t(ce))??"")}),k(G,oe)});var dt=b(W,2);_a(de,()=>t(gr),G=>g(gr,G)),_a(Fe,()=>t(br),G=>g(br,G)),ue("click",dt,Ds),k(Y,O)},Q=Y=>{var q=bt(),O=Me(q);{var N=D=>{var A=Tu(),X=p(A),W=b(p(X),2),se=p(W),de=p(se),Pe=b(se,2),Fe=p(Pe);F(()=>{U(de,(z(t(m)),z(H),d(()=>t(m)===H.MCTS?"Thinking...":"Playing..."))),U(Fe,(z(t(m)),z(H),d(()=>t(m)===H.Random?"Random":"MCTS")))}),k(D,A)},j=D=>{var A=Au();k(D,A)};M(O,D=>{t(l),t(Tn),t(An),z(t(u)),d(()=>t(l).computerShuffle&&t(Tn)&&t(An)===t(u))?D(N):D(j,!1)},!0)}k(Y,q)};M(rt,Y=>{t(l),d(()=>!t(l).computerShuffle)?Y(jt):Y(Q,!1)},!0)}k(Ue,St)};M(pe,Ue=>{t(h)?Ue(Ee):Ue(It,!1)},!0)}k(fe,K)};M(Se,fe=>{t(l),t(f),d(()=>!t(l).computerShuffle&&mt(t(f))>0)?fe(Ke):fe(nt,!1)})}F(fe=>{U(ae,`${fe??""} Turn `),Ce(be,1,`text-[10px] ml-1 px-1.5 py-0.5 rounded ${z(t(m)),z(H),d(()=>t(m)===H.MCTS?"bg-indigo-900/50 text-indigo-300":"bg-zinc-800 text-zinc-400")??""}`),U(xe,t(m))},[()=>(z(t(h)),z(t(u)),d(()=>t(h)?"Your":`${En(t(u))}'s`))]),k(s,y)};M(oo,s=>{t(f),t(l),t(Ge),d(()=>t(f)&&(t(l).computerShuffle||t(Ge)))&&s(lo)})}F(()=>{U(qs,(t(l),d(()=>t(l).computerShuffle?"toggle for real game help":"toggle to play vs computer"))),Ce(xr,1,`relative w-10 h-5 rounded-full transition-colors ${t(l),d(()=>t(l).computerShuffle?"bg-indigo-600":"bg-zinc-700")??""}`),or(xr,"aria-checked",(t(l),d(()=>t(l).computerShuffle))),Ce(Ys,1,`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${t(l),d(()=>t(l).computerShuffle?"translate-x-5":"translate-x-0")??""}`),Qn(Ki,(t(l),d(()=>t(l).numThreads))),yr.disabled=(t(_e),d(()=>!t(_e).length)),U(Qs,`Undo${t(_e),d(()=>t(_e).length?` (${t(_e).length})`:"")??""}`)}),ue("click",xr,()=>Rs(!t(l).computerShuffle)),ue("change",Ki,s=>{g(l,{...t(l),numThreads:parseInt(s.target.value)||4}),Je(t(l))}),ue("click",yr,Os),ue("click",Xs,()=>{zs(),location.reload()}),k(e,qi),yi()}kl(Ru,{target:document.getElementById("app")});
